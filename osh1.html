<!DOCTYPE html>
    <!-- Ø§Ø®Ø± Ø­Ø¯ÙŠØ« Ù…Ø¹ Ø§Ù„Ø§Ø­ØµØ§Ø¡Ø§Øª -->
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø³Ø§Ø¨Ù‚Ø© Ø§Ù„ØªÙØ³ÙŠØ± Ø§Ù„ÙƒØ¨Ø±Ù‰</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Tajawal:wght@400;500;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <style>
        :root {
            --primary: #1a5f4a;
            --primary-light: #2d8a6e;
            --secondary: #d4af37;
            --accent: #c9302c;
            --bg-dark: #0d1b16;
            --bg-card: #132a22;
            --text-light: #f4f1e8;
            --text-muted: #a8b5a0;
            --gold-gradient: linear-gradient(135deg, #d4af37 0%, #f4e4a6 50%, #d4af37 100%);
            --success: #28a745;
            --danger: #dc3545;
        }

        .light {
            --primary: #2d8a6e;
            --primary-light: #3da882;
            --bg-dark: #f5f5f0;
            --bg-card: #ffffff;
            --text-light: #1a1a1a;
            --text-muted: #666666;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Tajawal', sans-serif;
            background: var(--bg-dark);
            color: var(--text-light);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .bg-pattern {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:
                radial-gradient(circle at 20% 80%, rgba(26, 95, 74, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(212, 175, 55, 0.15) 0%, transparent 50%),
                url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M30 0L30 60M0 30L60 30' stroke='%231a5f4a' stroke-opacity='0.1' stroke-width='1'/%3E%3C/svg%3E");
            z-index: -1;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }

        /* User Bar */
        .user-bar {
            background: var(--bg-card);
            border: 2px solid var(--primary);
            border-radius: 15px;
            padding: 15px 20px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .user-avatar {
            width: 50px;
            height: 50px;
            background: var(--gold-gradient);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: #1a1a1a;
        }

        .user-name {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--secondary);
        }

        .user-id {
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .not-registered {
            color: var(--accent);
            cursor: pointer;
            text-decoration: underline;
        }

        .not-registered:hover {
            color: var(--secondary);
        }

        .logout-btn {
            background: var(--accent);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-family: 'Tajawal', sans-serif;
            font-size: 0.9rem;
            transition: all 0.3s;
        }

        .logout-btn:hover {
            background: #a52520;
        }

        /* Header */
        .header {
            text-align: center;
            padding: 30px 20px;
            margin-bottom: 30px;
            cursor: default;
            user-select: none;
        }

        .header h1 {
            font-family: 'Amiri', serif;
            font-size: clamp(2rem, 6vw, 3.5rem);
            background: var(--gold-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
            text-shadow: 0 0 30px rgba(212, 175, 55, 0.3);
        }

        .header p {
            color: var(--text-muted);
            font-size: 1.1rem;
        }

        /* Stats Bar */
        .stats-bar {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin-bottom: 30px;
        }

        .stat-item {
            background: var(--bg-card);
            border: 1px solid var(--primary);
            border-radius: 15px;
            padding: 15px 25px;
            text-align: center;
            min-width: 120px;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .stat-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(26, 95, 74, 0.3);
        }

        .stat-item i {
            font-size: 1.5rem;
            color: var(--secondary);
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--secondary);
        }

        .stat-label {
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        /* Main Menu */
        .main-menu {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .menu-card {
            background: linear-gradient(145deg, var(--bg-card), rgba(26, 95, 74, 0.2));
            border: 2px solid var(--primary);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
        }

        .menu-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.1), transparent);
            transition: left 0.5s;
        }

        .menu-card:hover::before {
            left: 100%;
        }

        .menu-card:hover {
            transform: translateY(-8px) scale(1.02);
            border-color: var(--secondary);
            box-shadow: 0 20px 40px rgba(212, 175, 55, 0.2);
        }

        .menu-card i {
            font-size: 3rem;
            color: var(--secondary);
            margin-bottom: 15px;
            display: block;
        }

        .menu-card h3 {
            font-size: 1.4rem;
            margin-bottom: 10px;
            color: var(--text-light);
        }

        .menu-card p {
            color: var(--text-muted);
            font-size: 0.95rem;
        }

        /* Game Screen */
        .game-screen {
            display: none;
        }

        .game-screen.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Progress Bar */
        .progress-container {
            background: var(--bg-card);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 25px;
            border: 1px solid var(--primary);
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .round-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .round-badge {
            background: var(--gold-gradient);
            color: #1a1a1a;
            padding: 8px 20px;
            border-radius: 25px;
            font-weight: 700;
        }

        .timer {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1.3rem;
            color: var(--secondary);
        }

        .timer.warning {
            color: var(--accent);
            animation: pulse 0.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .progress-bar {
            height: 10px;
            background: rgba(26, 95, 74, 0.3);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--gold-gradient);
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        /* Question Card */
        .question-card {
            background: var(--bg-card);
            border: 2px solid var(--primary);
            border-radius: 25px;
            padding: 30px;
            margin-bottom: 25px;
            position: relative;
            overflow: hidden;
        }

        .question-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, rgba(212, 175, 55, 0.1) 0%, transparent 70%);
        }

        .question-number {
            position: absolute;
            top: 20px;
            left: 20px;
            background: var(--primary);
            color: var(--secondary);
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.2rem;
        }

        .question-type {
            display: inline-block;
            background: rgba(212, 175, 55, 0.2);
            color: var(--secondary);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            margin-bottom: 20px;
        }

        .question-text {
            font-family: 'Amiri', serif;
            font-size: clamp(1.2rem, 4vw, 1.6rem);
            line-height: 2;
            margin-bottom: 25px;
            color: var(--text-light);
        }

        /* Options */
        .options-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option {
            background: rgba(26, 95, 74, 0.2);
            border: 2px solid var(--primary);
            border-radius: 15px;
            padding: 18px 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 1.1rem;
        }

        .option:hover:not(.disabled) {
            background: rgba(26, 95, 74, 0.4);
            border-color: var(--secondary);
            transform: translateX(-5px);
        }

        .option.selected {
            background: rgba(212, 175, 55, 0.2);
            border-color: var(--secondary);
        }

        .option.correct {
            background: rgba(40, 167, 69, 0.3);
            border-color: var(--success);
        }

        .option.wrong {
            background: rgba(220, 53, 69, 0.3);
            border-color: var(--danger);
        }

        .option.disabled {
            pointer-events: none;
        }

        .option-letter {
            width: 35px;
            height: 35px;
            background: var(--primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: var(--secondary);
            flex-shrink: 0;
        }

        .option.correct .option-letter {
            background: var(--success);
            color: white;
        }

        .option.wrong .option-letter {
            background: var(--danger);
            color: white;
        }

        /* True/False Options */
        .tf-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .tf-option {
            padding: 25px;
            text-align: center;
            font-size: 1.3rem;
            font-weight: 700;
        }

        .tf-option i {
            font-size: 2rem;
            margin-bottom: 10px;
            display: block;
        }

        /* Buttons */
        .btn {
            background: var(--gold-gradient);
            color: #1a1a1a;
            border: none;
            padding: 15px 40px;
            border-radius: 30px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Tajawal', sans-serif;
        }

        .btn:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(212, 175, 55, 0.4);
        }

        .btn-secondary {
            background: var(--primary);
            color: var(--text-light);
        }

        .btn-container {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        /* Results Screen */
        .results-card {
            background: var(--bg-card);
            border: 2px solid var(--secondary);
            border-radius: 25px;
            padding: 40px;
            text-align: center;
        }

        .results-icon {
            font-size: 5rem;
            margin-bottom: 20px;
        }

        .results-icon.excellent { color: var(--secondary); }
        .results-icon.good { color: var(--success); }
        .results-icon.average { color: #ffc107; }
        .results-icon.poor { color: var(--danger); }

        .results-title {
            font-family: 'Amiri', serif;
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: var(--gold-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .results-score {
            font-size: 4rem;
            font-weight: 800;
            color: var(--secondary);
            margin: 20px 0;
        }

        .results-details {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 25px 0;
            flex-wrap: wrap;
        }

        .result-stat {
            text-align: center;
        }

        .result-stat-value {
            font-size: 2rem;
            font-weight: 700;
        }

        .result-stat-value.correct { color: var(--success); }
        .result-stat-value.wrong { color: var(--danger); }

        .result-stat-label {
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        /* Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
            overflow-y: auto;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background: var(--bg-card);
            border: 2px solid var(--secondary);
            border-radius: 25px;
            padding: 30px;
            max-width: 500px;
            width: 100%;
            text-align: center;
            animation: modalIn 0.3s ease;
            max-height: 90vh;
            overflow-y: auto;
            margin: auto;
        }

        .modal.wide {
            max-width: 800px;
        }

        @keyframes modalIn {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .modal h2 {
            font-family: 'Amiri', serif;
            font-size: 1.8rem;
            color: var(--secondary);
            margin-bottom: 20px;
        }

        .modal p {
            color: var(--text-muted);
            margin-bottom: 25px;
            line-height: 1.8;
        }

        /* Form Inputs */
        .form-group {
            margin-bottom: 20px;
            text-align: right;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--secondary);
            font-weight: 600;
        }

        .form-group input {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid var(--primary);
            border-radius: 15px;
            background: rgba(26, 95, 74, 0.2);
            color: var(--text-light);
            font-size: 1.1rem;
            font-family: 'Tajawal', sans-serif;
            transition: border-color 0.3s;
        }

        .form-group input:focus {
            outline: none;
            border-color: var(--secondary);
        }

        .form-group input::placeholder {
            color: var(--text-muted);
        }

        /* Round Selection */
        .round-selection {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            margin: 20px 0;
            max-height: 300px;
            overflow-y: auto;
            padding: 10px 5px;
        }

        .round-option {
            background: rgba(26, 95, 74, 0.3);
            border: 2px solid var(--primary);
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .round-option:hover, .round-option.selected {
            border-color: var(--secondary);
            background: rgba(212, 175, 55, 0.2);
        }

        .round-option h4 {
            color: var(--secondary);
            margin-bottom: 5px;
        }

        .round-option p {
            font-size: 0.85rem;
            margin: 0;
        }

        /* Leaderboard */
        .leaderboard {
            background: var(--bg-card);
            border: 2px solid var(--primary);
            border-radius: 20px;
            padding: 25px;
        }

        .leaderboard h3 {
            text-align: center;
            color: var(--secondary);
            margin-bottom: 20px;
            font-size: 1.5rem;
        }

        .leaderboard-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            background: rgba(26, 95, 74, 0.2);
        }

        .leaderboard-item.gold { background: rgba(255, 215, 0, 0.2); border: 1px solid gold; }
        .leaderboard-item.silver { background: rgba(192, 192, 192, 0.2); border: 1px solid silver; }
        .leaderboard-item.bronze { background: rgba(205, 127, 50, 0.2); border: 1px solid #cd7f32; }

        .rank {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.2rem;
        }

        .rank.gold { background: gold; color: #1a1a1a; }
        .rank.silver { background: silver; color: #1a1a1a; }
        .rank.bronze { background: #cd7f32; color: white; }
        .rank.normal { background: var(--primary); color: var(--text-light); }

        .leaderboard-name { flex: 1; font-weight: 500; }
        .leaderboard-score { color: var(--secondary); font-weight: 700; font-size: 1.2rem; }
        .leaderboard-games { color: var(--text-muted); font-size: 0.85rem; margin-right: 10px; }

        /* Feedback Animation */
        .feedback {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 5rem;
            z-index: 100;
            animation: feedbackPop 0.8s ease forwards;
            pointer-events: none;
        }

        @keyframes feedbackPop {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
            50% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 0; }
        }

        /* Confetti */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            top: -10px;
            z-index: 99;
            animation: confettiFall 3s linear forwards;
        }

        @keyframes confettiFall {
            to {
                top: 100vh;
                transform: rotate(720deg);
            }
        }

        /* Admin Table */
        .admin-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            text-align: right;
        }

        .admin-table th, .admin-table td {
            padding: 12px 15px;
            border: 1px solid var(--primary);
        }

        .admin-table th {
            background: var(--primary);
            color: var(--secondary);
        }

        .admin-table tr:nth-child(even) {
            background: rgba(26, 95, 74, 0.1);
        }

        .admin-table tr:hover {
            background: rgba(26, 95, 74, 0.2);
        }

        .admin-btn {
            padding: 5px 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.85rem;
            margin: 2px;
        }

        .admin-btn.delete { background: var(--danger); color: white; }
        .admin-btn.reset { background: var(--secondary); color: #1a1a1a; }

        .admin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .admin-stat-card {
            background: rgba(26, 95, 74, 0.3);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
        }

        .admin-stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--secondary);
        }

        .admin-stat-label {
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        /* Responsive */
        @media (max-width: 600px) {
            .container { padding: 10px; }
            .header { padding: 20px 10px; margin-bottom: 20px; }
            .header h1 { font-size: 1.8rem; }
            .header p { font-size: 0.95rem; }
            .question-card { padding: 15px; padding-top: 50px; }
            .question-number { width: 35px; height: 35px; font-size: 1rem; top: 10px; left: 10px; }
            .question-text { font-size: 1.1rem; line-height: 1.8; }
            .option { padding: 12px 15px; font-size: 1rem; }
            .option-letter { width: 28px; height: 28px; font-size: 0.9rem; }
            .tf-options { grid-template-columns: 1fr; }
            .tf-option { padding: 18px; font-size: 1.1rem; }
            .stats-bar { gap: 8px; }
            .stat-item { min-width: 90px; padding: 10px 12px; }
            .stat-value { font-size: 1.5rem; }
            .stat-label { font-size: 0.75rem; }
            .menu-card { padding: 20px; }
            .menu-card i { font-size: 2.5rem; }
            .menu-card h3 { font-size: 1.2rem; }
            .menu-card p { font-size: 0.85rem; }
            .main-menu { grid-template-columns: 1fr 1fr; gap: 12px; }
            .progress-container { padding: 15px; }
            .round-badge { padding: 6px 12px; font-size: 0.85rem; }
            .timer { font-size: 1.1rem; }
            .btn { padding: 12px 25px; font-size: 1rem; }
            .btn-container { gap: 10px; }
            .results-card { padding: 25px 15px; }
            .results-icon { font-size: 4rem; }
            .results-title { font-size: 1.8rem; }
            .results-score { font-size: 3rem; }
            .result-stat-value { font-size: 1.5rem; }
            .modal { padding: 20px; max-height: 85vh; }
            .round-selection { max-height: 250px; grid-template-columns: 1fr; }
            .round-option { padding: 15px; }
            .exit-btn { padding: 8px 15px; font-size: 0.85rem; }
            .user-bar { flex-direction: column; text-align: center; }
            .user-info { flex-direction: column; }
            .admin-table { font-size: 0.85rem; }
            .admin-table th, .admin-table td { padding: 8px; }
        }

        @media (max-width: 400px) {
            .main-menu { grid-template-columns: 1fr; }
            .stats-bar { flex-direction: row; justify-content: space-around; }
            .stat-item { min-width: 80px; flex: 1; }
        }

        /* Exit Button */
        .exit-btn {
            background: var(--accent);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Tajawal', sans-serif;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .exit-btn:hover {
            background: #a52520;
            transform: scale(1.05);
        }

        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        /* Auto-next countdown */
        .countdown-bar {
            height: 4px;
            background: var(--secondary);
            border-radius: 2px;
            margin-top: 15px;
            animation: countdownShrink 3s linear forwards;
        }

        @keyframes countdownShrink {
            from { width: 100%; }
            to { width: 0%; }
        }

        /* Hide screens */
        #home-screen { display: block; }
        #game-screen, #results-screen, #leaderboard-screen, #stats-screen { display: none; }

        /* General Statistics Styles */
        .last-joined-card {
            background: linear-gradient(135deg, rgba(26, 95, 74, 0.4), rgba(212, 175, 55, 0.2));
            border: 2px solid var(--primary);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            text-align: center;
        }

        .last-joined-title {
            color: var(--text-muted);
            font-size: 0.9rem;
            margin-bottom: 10px;
        }

        .last-joined-title i {
            color: var(--secondary);
            margin-left: 8px;
        }

        .last-joined-list {
            margin-top: 10px;
        }

        .last-joined-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 15px;
            background: rgba(26, 95, 74, 0.2);
            border-radius: 10px;
            margin-bottom: 8px;
        }

        .last-joined-item:last-child {
            margin-bottom: 0;
        }

        .last-joined-item .name {
            color: var(--secondary);
            font-weight: 600;
            font-size: 1.1rem;
        }

        .last-joined-item .datetime {
            color: var(--text-muted);
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .last-joined-item .datetime i {
            font-size: 0.75rem;
        }

        .last-joined-empty {
            color: var(--text-muted);
            text-align: center;
            padding: 15px;
        }

        /* Multi-select Dropdown */
        .multi-select-container {
            position: relative;
            margin-bottom: 20px;
        }

        .multi-select-header {
            background: rgba(26, 95, 74, 0.3);
            border: 2px solid var(--primary);
            border-radius: 12px;
            padding: 15px 20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s;
        }

        .multi-select-header:hover {
            border-color: var(--secondary);
        }

        .multi-select-header span {
            color: var(--text-light);
        }

        .multi-select-header i {
            color: var(--secondary);
            transition: transform 0.3s;
        }

        .multi-select-header.open i {
            transform: rotate(180deg);
        }

        .multi-select-dropdown {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: var(--bg-card);
            border: 2px solid var(--primary);
            border-radius: 12px;
            margin-top: 5px;
            z-index: 100;
            max-height: 300px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .multi-select-dropdown.show {
            display: block;
        }

        .search-box {
            padding: 12px 15px;
            border-bottom: 1px solid var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .search-box i {
            color: var(--text-muted);
        }

        .search-box input {
            flex: 1;
            background: transparent;
            border: none;
            color: var(--text-light);
            font-size: 1rem;
            font-family: 'Tajawal', sans-serif;
            outline: none;
        }

        .search-box input::placeholder {
            color: var(--text-muted);
        }

        .select-all-row {
            padding: 10px 15px;
            border-bottom: 1px solid var(--primary);
            background: rgba(26, 95, 74, 0.2);
        }

        .select-all-row label {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            color: var(--secondary);
            font-weight: 600;
        }

        .students-list {
            max-height: 200px;
            overflow-y: auto;
        }

        .student-item {
            padding: 10px 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .student-item:hover {
            background: rgba(26, 95, 74, 0.3);
        }

        .student-item label {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            flex: 1;
            color: var(--text-light);
        }

        .student-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: var(--secondary);
        }

        /* Stats Table */
        .stats-table-container {
            overflow-x: auto;
        }

        .stats-table {
            width: 100%;
            border-collapse: collapse;
            text-align: center;
        }

        .stats-table th {
            background: var(--primary);
            color: var(--secondary);
            padding: 15px 10px;
            font-weight: 600;
            white-space: nowrap;
        }

        .stats-table td {
            padding: 12px 10px;
            border-bottom: 1px solid rgba(26, 95, 74, 0.3);
            color: var(--text-light);
        }

        .stats-table tbody tr:hover {
            background: rgba(26, 95, 74, 0.2);
        }

        .stats-table .student-name-cell {
            text-align: right;
            font-weight: 500;
        }

        .stats-table .points-positive {
            color: var(--success);
            font-weight: 700;
        }

        .stats-table .points-negative {
            color: var(--danger);
            font-weight: 700;
        }

        .stats-table .points-zero {
            color: var(--text-muted);
        }

        .no-data-message {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-muted);
        }

        .no-data-message i {
            font-size: 3rem;
            color: var(--primary);
            margin-bottom: 15px;
            display: block;
        }

        @media (max-width: 600px) {
            .stats-table th, .stats-table td {
                padding: 10px 6px;
                font-size: 0.85rem;
            }
            .last-joined-name {
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <div class="bg-pattern"></div>
    <div class="container">
        <!-- User Bar -->
        <div class="user-bar" id="user-bar">
            <div class="user-info" id="user-info">
                <div class="user-avatar"><i class="fas fa-user"></i></div>
                <div>
                    <div class="not-registered" onclick="showLoginModal()">
                        Ø£Ù†Øª ØºÙŠØ± Ù…Ø³Ø¬Ù„ - Ø§Ù†Ù‚Ø± Ù‡Ù†Ø§ Ù„Ù„ØªØ³Ø¬ÙŠÙ„
                    </div>
                </div>
            </div>
        </div>

        <!-- Header -->
        <header class="header" id="main-header">
            <h1><i class="fas fa-quran"></i> Ù…Ø³Ø§Ø¨Ù‚Ø© Ø§Ù„ØªÙØ³ÙŠØ± Ø§Ù„ÙƒØ¨Ø±Ù‰</h1>
            <p>Ø§Ø®ØªØ¨Ø± Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ ÙÙŠ Ø¹Ù„Ù… Ø§Ù„ØªÙØ³ÙŠØ± ÙˆØªÙØ³ÙŠØ± Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</p>
        </header>

        <!-- Stats Bar -->
        <div class="stats-bar" id="stats-bar">
            <div class="stat-item">
                <i class="fas fa-trophy"></i>
                <div class="stat-value" id="total-score">0</div>
                <div class="stat-label">Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„ÙƒÙ„ÙŠØ©</div>
            </div>
            <div class="stat-item">
                <i class="fas fa-fire"></i>
                <div class="stat-value" id="streak">0</div>
                <div class="stat-label">Ø³Ù„Ø³Ù„Ø© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª</div>
            </div>
            <div class="stat-item">
                <i class="fas fa-gamepad"></i>
                <div class="stat-value" id="games-played">0</div>
                <div class="stat-label">Ø§Ù„Ø¬ÙˆÙ„Ø§Øª</div>
            </div>
        </div>

        <!-- Home Screen -->
        <div id="home-screen" class="game-screen active">
            <div class="main-menu">
                <div class="menu-card" onclick="requireLogin('startQuickGame')">
                    <i class="fas fa-bolt"></i>
                    <h3>Ø¬ÙˆÙ„Ø© Ø³Ø±ÙŠØ¹Ø©</h3>
                    <p>10 Ø£Ø³Ø¦Ù„Ø© Ù…ØªÙ†ÙˆØ¹Ø© - Ø§Ø®ØªØ¨Ø± Ø³Ø±Ø¹ØªÙƒ!</p>
                </div>
                <div class="menu-card" onclick="requireLogin('showRoundModal')">
                    <i class="fas fa-book-open"></i>
                    <h3>Ø§Ø®ØªØ± Ø£Ø­Ø¯ Ø§Ù„Ø¯Ø±ÙˆØ³</h3>
                    <p>ØªØ¯Ø±Ø¨ Ø¹Ù„Ù‰ Ø¯Ø±Ø³ Ù…Ø­Ø¯Ø¯</p>
                </div>
                <div class="menu-card" onclick="requireLogin('startMarathon')">
                    <i class="fas fa-running"></i>
                    <h3>Ù…Ø§Ø±Ø§Ø«ÙˆÙ† Ø§Ù„ØªÙØ³ÙŠØ±</h3>
                    <p>25 Ø³Ø¤Ø§Ù„ - ØªØ­Ø¯ÙŠ Ø´Ø§Ù…Ù„!</p>
                </div>
                <div class="menu-card" onclick="showLeaderboard()">
                    <i class="fas fa-medal"></i>
                    <h3>Ù„ÙˆØ­Ø© Ø§Ù„Ù…ØªØµØ¯Ø±ÙŠÙ†</h3>
                    <p>Ø´Ø§Ù‡Ø¯ Ø£ÙØ¶Ù„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬</p>
                </div>
                <div class="menu-card" onclick="showGeneralStats()">
                    <i class="fas fa-chart-bar"></i>
                    <h3>Ø§Ù„Ø¥Ø­ØµØ§Ø¡Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©</h3>
                    <p>Ø¹Ø±Ø¶ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø·Ù„Ø§Ø¨</p>
                </div>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="game-screen" class="game-screen">
            <div class="game-header">
                <button class="exit-btn" onclick="confirmExit()">
                    <i class="fas fa-sign-out-alt"></i> Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¬ÙˆÙ„Ø©
                </button>
            </div>
            <div class="progress-container">
                <div class="progress-header">
                    <div class="round-info">
                        <span class="round-badge" id="round-name">Ø§Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„Ø³Ø±ÙŠØ¹Ø©</span>
                        <span id="question-counter">Ø§Ù„Ø³Ø¤Ø§Ù„ 1 Ù…Ù† 10</span>
                    </div>
                    <div class="timer" id="timer">
                        <i class="fas fa-clock"></i>
                        <span id="time-left">30</span>
                    </div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
                </div>
            </div>

            <div class="question-card">
                <div class="question-number" id="q-number">1</div>
                <span class="question-type" id="q-type">Ø§Ø®ØªÙŠØ§Ø± Ù…Ù† Ù…ØªØ¹Ø¯Ø¯</span>
                <p class="question-text" id="question-text">Ù†Øµ Ø§Ù„Ø³Ø¤Ø§Ù„ Ù‡Ù†Ø§...</p>
                <div class="options-container" id="options-container"></div>
                <div class="countdown-bar" id="countdown-bar" style="display: none;"></div>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="results-screen" class="game-screen">
            <div class="results-card">
                <div class="results-icon" id="results-icon">ğŸ†</div>
                <h2 class="results-title" id="results-title">Ù…Ù…ØªØ§Ø²!</h2>
                <div class="results-score" id="final-score">0%</div>
                <div class="results-details">
                    <div class="result-stat">
                        <div class="result-stat-value correct" id="correct-count">0</div>
                        <div class="result-stat-label">Ø¥Ø¬Ø§Ø¨Ø§Øª ØµØ­ÙŠØ­Ø©</div>
                    </div>
                    <div class="result-stat">
                        <div class="result-stat-value wrong" id="wrong-count">0</div>
                        <div class="result-stat-label">Ø¥Ø¬Ø§Ø¨Ø§Øª Ø®Ø§Ø·Ø¦Ø©</div>
                    </div>
                    <div class="result-stat">
                        <div class="result-stat-value" id="points-earned" style="color: var(--secondary)">0</div>
                        <div class="result-stat-label">Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù…ÙƒØªØ³Ø¨Ø©</div>
                    </div>
                </div>
                <div class="btn-container">
                    <button class="btn btn-secondary" onclick="goHome()">
                        <i class="fas fa-home"></i> Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                    </button>
                    <button class="btn" onclick="playAgain()">
                        <i class="fas fa-redo"></i> Ø§Ù„Ø¹Ø¨ Ù…Ø¬Ø¯Ø¯Ø§Ù‹
                    </button>
                </div>
            </div>
        </div>

        <!-- Leaderboard Screen -->
        <div id="leaderboard-screen" class="game-screen">
            <div class="leaderboard">
                <h3><i class="fas fa-crown"></i> Ù„ÙˆØ­Ø© Ø§Ù„Ù…ØªØµØ¯Ø±ÙŠÙ†</h3>
                <div id="leaderboard-list"></div>
            </div>
            <div class="btn-container" style="margin-top: 25px;">
                <button class="btn" onclick="goHome()">
                    <i class="fas fa-arrow-right"></i> Ø§Ù„Ø¹ÙˆØ¯Ø©
                </button>
            </div>
        </div>

        <!-- General Statistics Screen -->
        <div id="stats-screen" class="game-screen">
            <div class="leaderboard">
                <h3><i class="fas fa-chart-bar"></i> Ø§Ù„Ø¥Ø­ØµØ§Ø¡Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©</h3>

                <!-- Ø¢Ø®Ø± Ù…Ù† Ø§Ù†Ø¶Ù… -->
                <div class="last-joined-card" id="last-joined-card">
                    <div class="last-joined-title"><i class="fas fa-user-plus"></i> Ø¢Ø®Ø± Ù…Ù† Ø§Ù†Ø¶Ù… Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©</div>
                    <div class="last-joined-list" id="last-joined-list">-</div>
                </div>

                <!-- Multi-select Dropdown -->
                <div class="multi-select-container">
                    <div class="multi-select-header" onclick="toggleMultiSelect()">
                        <span id="selected-count">Ø§Ø®ØªØ± Ø§Ù„Ø·Ù„Ø§Ø¨ Ù„Ù„Ø¹Ø±Ø¶ (Ø§Ù„ÙƒÙ„)</span>
                        <i class="fas fa-chevron-down" id="dropdown-arrow"></i>
                    </div>
                    <div class="multi-select-dropdown" id="multi-select-dropdown">
                        <div class="search-box">
                            <i class="fas fa-search"></i>
                            <input type="text" id="student-search" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø·Ø§Ù„Ø¨..." oninput="filterStudents()">
                        </div>
                        <div class="select-all-row">
                            <label>
                                <input type="checkbox" id="select-all-checkbox" onchange="toggleSelectAll()">
                                <span>ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙƒÙ„</span>
                            </label>
                        </div>
                        <div class="students-list" id="students-list"></div>
                    </div>
                </div>

                <!-- Stats Table -->
                <div class="stats-table-container">
                    <table class="stats-table" id="stats-table">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨</th>
                                <th><i class="fas fa-question-circle"></i> Ø§Ù„Ø£Ø³Ø¦Ù„Ø©</th>
                                <th><i class="fas fa-check" style="color: var(--success);"></i> ØµØ­ÙŠØ­Ø©</th>
                                <th><i class="fas fa-times" style="color: var(--danger);"></i> Ø®Ø§Ø·Ø¦Ø©</th>
                                <th><i class="fas fa-star" style="color: var(--secondary);"></i> Ø§Ù„Ù†Ù‚Ø§Ø·</th>
                            </tr>
                        </thead>
                        <tbody id="stats-table-body"></tbody>
                    </table>
                </div>
            </div>
            <div class="btn-container" style="margin-top: 25px;">
                <button class="btn" onclick="goHome()">
                    <i class="fas fa-arrow-right"></i> Ø§Ù„Ø¹ÙˆØ¯Ø©
                </button>
            </div>
        </div>
    </div>

    <!-- Round Selection Modal -->
    <div class="modal-overlay" id="round-modal">
        <div class="modal">
            <h2><i class="fas fa-book"></i> Ø§Ø®ØªØ± Ø£Ø­Ø¯ Ø§Ù„Ø¯Ø±ÙˆØ³</h2>
            <p>Ø§Ø®ØªØ± Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯ Ø§Ù„ØªØ¯Ø±Ø¨ Ø¹Ù„ÙŠÙ‡<br> Ø«Ù… Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ ( Ø§Ø¨Ø¯Ø£ )
            </p>
            <div class="round-selection" id="unit-selection"></div>
            <div class="btn-container">
                <button class="btn btn-secondary" onclick="closeModal('round-modal')">Ø¥Ù„ØºØ§Ø¡</button>
                <button class="btn" onclick="startUnitGame()">Ø§Ø¨Ø¯Ø£</button>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div class="modal-overlay" id="login-modal">
        <div class="modal">
            <h2><i class="fas fa-sign-in-alt"></i> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
            <p>Ø£Ù‡Ù„Ø§ Ø¨Ùƒ ÙÙŠ Ù…Ø³Ø§Ø¨Ù‚Ø© Ø§Ù„ØªÙØ³ÙŠØ±</p>
            <div class="form-group">
                <label>Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„Ù…Ø¯Ù†ÙŠ</label>
                <input type="text" id="login-id" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„Ù…Ø¯Ù†ÙŠ" maxlength="10">
            </div>
            <div class="btn-container">
                <button class="btn btn-secondary" onclick="closeModal('login-modal')">Ø¥Ù„ØºØ§Ø¡</button>
                <button class="btn" onclick="login()">Ø¯Ø®ÙˆÙ„</button>
            </div>
            <p style="margin-top: 20px; margin-bottom: 0;">
                <span class="not-registered" onclick="showRegisterModal()">Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ Ø³Ø¬Ù„ Ø§Ù„Ø¢Ù†</span>
            </p>
        </div>
    </div>

    <!-- Register Modal -->
    <div class="modal-overlay" id="register-modal">
        <div class="modal">
            <h2><i class="fas fa-user-plus"></i> Ø§Ù„ØªØ³Ø¬ÙŠÙ„</h2>
            <p>Ø³Ø¬Ù„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ù„Ù„Ù…Ø´Ø§Ø±ÙƒØ© ÙÙŠ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©</p>
            <div class="form-group">
                <label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
                <input type="text" id="register-name" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„">
            </div>
            <div class="form-group">
                <label>Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„Ù…Ø¯Ù†ÙŠ</label>
                <input type="text" id="register-id" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„Ù…Ø¯Ù†ÙŠ (10 Ø£Ø±Ù‚Ø§Ù…)" maxlength="10">
            </div>
            <div class="btn-container">
                <button class="btn btn-secondary" onclick="closeModal('register-modal')">Ø¥Ù„ØºØ§Ø¡</button>
                <button class="btn" onclick="register()">ØªØ³Ø¬ÙŠÙ„</button>
            </div>
            <p style="margin-top: 20px; margin-bottom: 0;">
                <span class="not-registered" onclick="showLoginModal()">Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„Ùƒ</span>
            </p>
        </div>
    </div>

    <!-- Admin Modal -->
    <div class="modal-overlay" id="admin-modal">
        <div class="modal wide">
            <h2><i class="fas fa-cog"></i> Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h2>
            <div id="admin-content"></div>
            <div class="btn-container" style="margin-top: 20px;">
                <button class="btn btn-secondary" onclick="closeModal('admin-modal')">Ø¥ØºÙ„Ø§Ù‚</button>
                <button class="btn" onclick="exportData()"><i class="fas fa-download"></i> ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
            </div>
        </div>
    </div>

    <!-- Admin Password Modal -->
    <div class="modal-overlay" id="admin-password-modal">
        <div class="modal">
            <h2><i class="fas fa-lock"></i> ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h2>
            <div class="form-group">
                <label>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                <input type="password" id="admin-password" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
            </div>
            <div class="btn-container">
                <button class="btn btn-secondary" onclick="closeModal('admin-password-modal')">Ø¥Ù„ØºØ§Ø¡</button>
                <button class="btn" onclick="verifyAdminPassword()">Ø¯Ø®ÙˆÙ„</button>
            </div>
        </div>
    </div>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBxPO6RKsQ1Cq-mqlCpFTrCuIyxnYdB37U",
            authDomain: "studentsystem-c1ab1.firebaseapp.com",
            databaseURL: "https://studentsystem-c1ab1-default-rtdb.firebaseio.com",
            projectId: "studentsystem-c1ab1",
            storageBucket: "studentsystem-c1ab1.firebasestorage.app",
            messagingSenderId: "112215023848",
            appId: "1:112215023848:web:0adba326a527ee7e37e95d"
        };
        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
        }
        const db = firebase.database();
        const rootRef = db.ref('tafser_01');

        // Ø§Ù„Ø£ØµÙˆØ§Øª
        const sounds = {
            correct: new Audio('sounds/correct.mp3'),
            wrong: new Audio('sounds/wrong.mp3')
        };

        // ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª
        function playSound(type) {
            try {
                sounds[type].currentTime = 0;
                sounds[type].play().catch(() => {});
            } catch (e) {}
        }

        // Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
        let usersDB = {};
        let currentUser = null;
        let adminPassword = "admin123";
        let pendingAction = null;

        // Ø¨Ù†Ùƒ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø´Ø§Ù…Ù„
        const questionsBank = [
            // ÙˆØ±Ù‚Ø© Ø¹Ù…Ù„ Ø§Ù„Ø¯Ø±Ø³ (1)
            { unit: 1, type: "mcq", question: "Ø£Ø¹Ù„Ù‰ Ø·Ø±Ù‚ Ø§Ù„ØªÙØ³ÙŠØ± Ù…Ù†Ø²Ù„Ø© Ù‡Ùˆ Ø§Ù„ØªÙØ³ÙŠØ± Ø¨Ù€:", options: ["Ø§Ù„Ø±Ø£ÙŠ Ø§Ù„Ù…Ø­Ù…ÙˆØ¯", "Ø§Ù„Ù…Ø£Ø«ÙˆØ±", "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©"], correct: 1 },
            { unit: 1, type: "mcq", question: "ÙƒØ§Ù† Ø§Ù„ØµØ­Ø§Ø¨Ø© Ù„Ø§ ÙŠØªØ¬Ø§ÙˆØ²ÙˆÙ† ... Ø¢ÙŠØ§Øª Ø­ØªÙ‰ ÙŠØªØ¹Ù„Ù…ÙˆØ§ Ù…Ø§ ÙÙŠÙ‡Ø§:", options: ["Ø®Ù…Ø³", "Ø¹Ø´Ø±", "Ø¹Ø´Ø±ÙŠÙ†"], correct: 1 },
            { unit: 1, type: "mcq", question: "Ù…Ù† Ø£Ø¨Ø±Ø² Ø¹Ù„Ù…Ø§Ø¡ Ù…Ø±Ø­Ù„Ø© Ø§Ø³ØªÙ‚Ù„Ø§Ù„ Ø§Ù„ØªÙØ³ÙŠØ± ÙˆØªØ¯ÙˆÙŠÙ†Ù‡ ÙƒØ¹Ù„Ù… Ù…Ø³ØªÙ‚Ù„:", options: ["Ø§Ø¨Ù† Ø¬Ø±ÙŠØ± Ø§Ù„Ø·Ø¨Ø±ÙŠ", "Ø³ÙÙŠØ§Ù† Ø¨Ù† Ø¹ÙŠÙŠÙ†Ø©", "Ø§Ø¨Ù† Ù…Ø³Ø¹ÙˆØ¯"], correct: 0 },
            { unit: 1, type: "tf", question: "Ø¨Ø¯Ø£ ØªØ¯ÙˆÙŠÙ† Ø§Ù„ØªÙØ³ÙŠØ± Ù…Ø³ØªÙ‚Ù„Ø§Ù‹ Ø¹Ù† Ø§Ù„Ø­Ø¯ÙŠØ« Ù…Ù†Ø° Ø¹Ù‡Ø¯ Ø§Ù„Ù†Ø¨ÙŠ ï·º.", correct: false },
            { unit: 1, type: "tf", question: "Ø§Ù„ØªÙØ³ÙŠØ± Ø¨Ø§Ù„Ø±Ø£ÙŠ Ø§Ù„Ù…Ø­Ù…ÙˆØ¯ Ù‡Ùˆ Ø§Ù„Ø§Ø¬ØªÙ‡Ø§Ø¯ Ø§Ù„ØµØ§Ø¯Ø± Ø¹Ù† Ù‡ÙˆÙ‰ ÙˆØ¬Ù‡Ù„.", correct: false },
            { unit: 1, type: "tf", question: "ØªÙ…ÙŠØ² ØªÙØ³ÙŠØ± Ø§Ù„ØµØ­Ø§Ø¨Ø© Ø¨Ø£Ù†Ù‡Ù… Ø£Ù‡Ù„ Ø§Ù„Ù„Ø³Ø§Ù† Ø§Ù„Ø¹Ø±Ø¨ÙŠ ÙˆØ´Ù‡Ø¯ÙˆØ§ Ø§Ù„ØªÙ†Ø²ÙŠÙ„.", correct: true },

            // ÙˆØ±Ù‚Ø© Ø¹Ù…Ù„ Ø§Ù„Ø¯Ø±Ø³ (2)
            { unit: 2, type: "mcq", question: "Ø£ØµØ­ Ø·Ø±Ù‚ Ø§Ù„ØªÙØ³ÙŠØ± Ø§Ù„ØªÙŠ ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ¨Ø¯Ø£ Ø¨Ù‡Ø§ Ø§Ù„Ù…ÙØ³Ø± Ù‡ÙŠ:", options: ["ØªÙØ³ÙŠØ± Ø§Ù„Ù‚Ø±Ø¢Ù† Ø¨Ø§Ù„Ø³Ù†Ø©", "ØªÙØ³ÙŠØ± Ø§Ù„Ù‚Ø±Ø¢Ù† Ø¨Ø§Ù„Ù‚Ø±Ø¢Ù†", "ØªÙØ³ÙŠØ± Ø§Ù„Ù‚Ø±Ø¢Ù† Ø¨Ø§Ù„Ø±Ø£ÙŠ"], correct: 1 },
            { unit: 2, type: "mcq", question: "Ù‚ÙˆÙ„Ù‡ ØªØ¹Ø§Ù„Ù‰ {Ø°ÙÙ‚Ù’ Ø¥ÙÙ†ÙÙ‘ÙƒÙ Ø£ÙÙ†ØªÙ Ø§Ù„Ù’Ø¹ÙØ²ÙÙŠØ²Ù Ø§Ù„Ù’ÙƒÙØ±ÙÙŠÙ…Ù} Ø³ÙŠØ§Ù‚Ù‡Ø§ ÙŠØ¯Ù„ Ø¹Ù„Ù‰:", options: ["Ø§Ù„Ù…Ø¯Ø­ ÙˆØ§Ù„Ø«Ù†Ø§Ø¡", "Ø§Ù„ØªØ­Ù‚ÙŠØ± ÙˆØ§Ù„ØªÙ‡ÙƒÙ…", "Ø§Ù„ÙˆØµÙ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ"], correct: 1 },
            { unit: 2, type: "mcq", question: "Ù…Ù† Ø¶ÙˆØ§Ø¨Ø· Ø§Ù„Ù…ÙØ³Ø± Ø§Ù„ØªÙŠ ØªØ­Ù…ÙŠÙ‡ Ù…Ù† Ø­Ù…Ù„ Ø§Ù„Ø£Ù„ÙØ§Ø¸ Ø¹Ù„Ù‰ Ù‡ÙˆØ§Ù‡:", options: ["Ø³Ù„Ø§Ù…Ø© Ø§Ù„Ø¹Ù‚ÙŠØ¯Ø©", "ÙƒØ«Ø±Ø© Ø§Ù„Ø­ÙØ¸", "Ø¬Ù…Ø§Ù„ Ø§Ù„Ø®Ø·"], correct: 0 },
            { unit: 2, type: "tf", question: "ÙŠØ¬ÙˆØ² Ù„Ù…Ù† ÙŠØªÙ‚Ù† Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ÙÙ‚Ø· Ø£Ù† ÙŠÙØ³Ø± Ø§Ù„Ù‚Ø±Ø¢Ù† Ø¯ÙˆÙ† Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø³Ù†Ø©.", correct: false },
            { unit: 2, type: "tf", question: "ØªÙØ³ÙŠØ± Ø§Ù„Ù‚Ø±Ø¢Ù† Ø¨Ø£Ù‚ÙˆØ§Ù„ Ø§Ù„ØµØ­Ø§Ø¨Ø© Ù…Ù‚Ø¯Ù… Ø¹Ù„Ù‰ ØªÙØ³ÙŠØ±Ù‡ Ø¨Ø£Ù‚ÙˆØ§Ù„ Ø§Ù„ØªØ§Ø¨Ø¹ÙŠÙ†.", correct: true },
            { unit: 2, type: "tf", question: "Ù…Ø±Ø§Ø¹Ø§Ø© Ø§Ù„Ø³ÙŠØ§Ù‚ Ø¶Ø±ÙˆØ±ÙŠ Ù„ÙÙ‡Ù… Ù…Ø±Ø§Ø¯ Ø§Ù„Ù„Ù‡ ÙÙŠ Ø§Ù„Ø¢ÙŠØ§Øª.", correct: true },

            // ÙˆØ±Ù‚Ø© Ø¹Ù…Ù„ Ø§Ù„Ø¯Ø±Ø³ (3)
            { unit: 3, type: "mcq", question: "Ø§Ù„ÙƒØªØ§Ø¨ Ø§Ù„Ø°ÙŠ ÙŠÙØ¹Ø¯ Ø£ØµØ­ Ø§Ù„ØªÙØ§Ø³ÙŠØ± ÙˆÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ù…ÙØ³Ø±ÙˆÙ† Ù‡Ùˆ:", options: ["ØªÙØ³ÙŠØ± Ø§Ù„Ø·Ø¨Ø±ÙŠ", "ØªÙØ³ÙŠØ± Ø§Ù„Ø³Ø¹Ø¯ÙŠ", "ØªÙØ³ÙŠØ± Ø§Ù„Ø¬Ù„Ø§Ù„ÙŠÙ†"], correct: 0 },
            { unit: 3, type: "mcq", question: "ÙŠØªÙ…ÙŠØ² ØªÙØ³ÙŠØ± \"Ø£Ø¶ÙˆØ§Ø¡ Ø§Ù„Ø¨ÙŠØ§Ù†\" Ù„Ù„Ø´Ù†Ù‚ÙŠØ·ÙŠ Ø¨Ù€:", options: ["Ø¬Ù…Ø¹ Ø§Ù„Ø±ÙˆØ§ÙŠØ§Øª Ø§Ù„Ø¶Ø¹ÙŠÙØ©", "Ø§Ù„Ø¹Ù†Ø§ÙŠØ© Ø¨Ø§Ù„Ø£Ø­ÙƒØ§Ù… Ø§Ù„ÙÙ‚Ù‡ÙŠØ© ÙˆØªÙØ³ÙŠØ± Ø§Ù„Ù‚Ø±Ø¢Ù† Ø¨Ø§Ù„Ù‚Ø±Ø¢Ù†", "Ø§Ù„Ø§Ø®ØªØµØ§Ø± Ø§Ù„Ø´Ø¯ÙŠØ¯"], correct: 1 },
            { unit: 3, type: "mcq", question: "Ù…Ø¤Ù„Ù ÙƒØªØ§Ø¨ \"ØªÙØ³ÙŠØ± Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„Ø¹Ø¸ÙŠÙ…\" Ù‡Ùˆ:", options: ["Ø¬Ù„Ø§Ù„ Ø§Ù„Ø¯ÙŠÙ† Ø§Ù„Ø³ÙŠÙˆØ·ÙŠ", "Ø§Ø¨Ù† ÙƒØ«ÙŠØ± Ø§Ù„Ø¯Ù…Ø´Ù‚ÙŠ", "Ø¹Ø¨Ø¯ Ø§Ù„Ø±Ø­Ù…Ù† Ø§Ù„Ø³Ø¹Ø¯ÙŠ"], correct: 1 },
            { unit: 3, type: "tf", question: "ÙƒØªØ§Ø¨ \"Ø§Ù„Ø¯Ø± Ø§Ù„Ù…Ù†Ø«ÙˆØ±\" Ù„Ù„Ø³ÙŠÙˆØ·ÙŠ ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø§Ù„ØªÙØ³ÙŠØ± Ø¨Ø§Ù„Ø±Ø£ÙŠ Ø§Ù„Ø¹Ù‚Ù„ÙŠ.", correct: false },
            { unit: 3, type: "tf", question: "ÙŠØªÙ…ÙŠØ² ØªÙØ³ÙŠØ± Ø§Ù„Ø³Ø¹Ø¯ÙŠ Ø¨Ø°ÙƒØ± Ø§Ù„Ù…Ø¹Ù†Ù‰ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¨Ø£Ø³Ù„ÙˆØ¨ Ø³Ù‡Ù„ ÙˆÙ…ÙŠØ³Ø±.", correct: true },
            { unit: 3, type: "tf", question: "Ù…Ù†Ù‡Ø¬ Ø§Ø¨Ù† ÙƒØ«ÙŠØ± ÙÙŠ Ø§Ù„ØªÙØ³ÙŠØ± ÙŠØ¨Ø¯Ø£ Ø¨Ø°ÙƒØ± Ø§Ù„Ø£Ø­Ø§Ø¯ÙŠØ« Ù‚Ø¨Ù„ Ø§Ù„Ø¢ÙŠØ§Øª Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©.", correct: false },

            // ÙˆØ±Ù‚Ø© Ø¹Ù…Ù„ Ø§Ù„Ø¯Ø±Ø³ (4)
            { unit: 4, type: "mcq", question: "Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø°ÙŠ ÙŠØªÙŠØ­ Ù„Ù„Ø·Ø§Ù„Ø¨ Ø­Ù„ Ø§Ù„ÙˆØ§Ø¬Ø¨Ø§Øª ÙˆØ¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØµÙˆØªÙŠ Ù„Ù„Ù…Ø¹Ù„Ù… Ù‡Ùˆ:", options: ["Ø¢ÙŠØ§Øª", "Ù…ØµØ­Ù Ù…Ø¯Ø±Ø³ØªÙŠ", "Ø§Ù„Ø¨Ø§Ø­Ø« Ø§Ù„Ù‚Ø±Ø¢Ù†ÙŠ"], correct: 1 },
            { unit: 4, type: "mcq", question: "Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„Ù…Ø´Ø±ÙØ© Ø¹Ù„Ù‰ ØªØ·Ø¨ÙŠÙ‚ ÙˆØ¨Ø±Ù†Ø§Ù…Ø¬ \"Ø¢ÙŠØ§Øª\" Ù‡ÙŠ:", options: ["ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ…", "Ø¬Ø§Ù…Ø¹Ø© Ø§Ù„Ù…Ù„Ùƒ Ø³Ø¹ÙˆØ¯", "Ù…Ø¬Ù…Ø¹ Ø§Ù„Ù…Ù„Ùƒ ÙÙ‡Ø¯"], correct: 1 },
            { unit: 4, type: "mcq", question: "Ø¹Ø¯Ø¯ Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„Ù…ØªØ®ØµØµØ© Ø§Ù„ØªÙŠ Ø£Ù†Ø´Ø£Ù‡Ø§ Ù…Ø¬Ù…Ø¹ Ø§Ù„Ù…Ù„Ùƒ ÙÙ‡Ø¯ Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ù‚Ø±Ø¢Ù†:", options: ["10 Ù…ÙˆØ§Ù‚Ø¹", "16 Ù…ÙˆÙ‚Ø¹Ø§Ù‹", "5 Ù…ÙˆØ§Ù‚Ø¹"], correct: 1 },
            { unit: 4, type: "tf", question: "Ø¬Ù…ÙŠØ¹ ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ Ù…ØªØ§Ø¬Ø± Ø§Ù„Ù‡ÙˆØ§ØªÙ Ù…ÙˆØ«ÙˆÙ‚Ø© ÙˆØµØ­ÙŠØ­Ø©.", correct: false },
            { unit: 4, type: "tf", question: "ÙŠÙ‚Ø¯Ù… Ù…Ø¬Ù…Ø¹ Ø§Ù„Ù…Ù„Ùƒ ÙÙ‡Ø¯ Ø®Ø¯Ù…Ø§Øª Ø±Ù‚Ù…ÙŠØ© ØªØ´Ù…Ù„ ØªØ±Ø¬Ù…Ø§Øª Ù…Ø¹Ø§Ù†ÙŠ Ø§Ù„Ù‚Ø±Ø¢Ù†.", correct: true },
            { unit: 4, type: "tf", question: "ØªØªÙŠØ­ Ø§Ù„ØªÙ‚Ù†ÙŠØ© Ø§Ù„Ø­Ø¯ÙŠØ«Ø© Ø§Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹ Ù„ÙƒØªØ¨ Ø§Ù„ØªÙØ³ÙŠØ± Ø§Ù„Ù…Ø¹ØªÙ…Ø¯Ø©.", correct: true },

            // ÙˆØ±Ù‚Ø© Ø¹Ù…Ù„ Ø§Ù„Ø¯Ø±Ø³ (5)
            { unit: 5, type: "mcq", question: "Ø§Ù„Ù…Ù‚ØµÙˆØ¯ Ø¨Ù€ (ÙŠÙˆÙ… Ø§Ù„Ø¯ÙŠÙ†) ÙÙŠ Ø§Ù„Ø³ÙˆØ±Ø©:", options: ["ÙŠÙˆÙ… Ø§Ù„Ø¬Ù…Ø¹Ø©", "ÙŠÙˆÙ… Ø§Ù„Ø¬Ø²Ø§Ø¡ ÙˆØ§Ù„Ø­Ø³Ø§Ø¨", "ÙŠÙˆÙ… Ø§Ù„Ø¹ÙŠØ¯"], correct: 1 },
            { unit: 5, type: "mcq", question: "Ø§Ù„Ø°ÙŠÙ† Ø¹Ø±ÙÙˆØ§ Ø§Ù„Ø­Ù‚ ÙˆÙ„Ù… ÙŠØªØ¨Ø¹ÙˆÙ‡ ÙˆØµÙÙ‡Ù… Ø§Ù„Ù„Ù‡ Ø¨Ù€:", options: ["Ø§Ù„Ù…ØºØ¶ÙˆØ¨ Ø¹Ù„ÙŠÙ‡Ù…", "Ø§Ù„Ø¶Ø§Ù„ÙŠÙ†", "Ø§Ù„Ù…Ù†Ø¹Ù… Ø¹Ù„ÙŠÙ‡Ù…"], correct: 0 },
            { unit: 5, type: "mcq", question: "Ù‚Ø¯Ù… Ø§Ù„Ù„Ù‡ \"Ø§Ù„Ø¹Ø¨Ø§Ø¯Ø©\" Ø¹Ù„Ù‰ \"Ø§Ù„Ø§Ø³ØªØ¹Ø§Ù†Ø©\" ÙÙŠ Ø§Ù„Ø¢ÙŠØ© Ù„Ø£Ù†:", options: ["Ø§Ù„Ø§Ø³ØªØ¹Ø§Ù†Ø© Ø£Ù‡Ù…", "Ø§Ù„Ø¹Ø¨Ø§Ø¯Ø© Ù‡ÙŠ Ø§Ù„ØºØ§ÙŠØ© ÙˆØ§Ù„Ù…Ù‚ØµÙˆØ¯", "Ø§Ù„Ø³ÙŠØ§Ù‚ Ø§Ù„Ù„ÙØ¸ÙŠ"], correct: 1 },
            { unit: 5, type: "tf", question: "Ø³ÙˆØ±Ø© Ø§Ù„ÙØ§ØªØ­Ø© Ù‡ÙŠ Ø£ÙˆÙ„ Ø³ÙˆØ±Ø© Ù†Ø²Ù„Øª ÙƒØ§Ù…Ù„Ø© ÙÙŠ Ø§Ù„Ù‚Ø±Ø¢Ù†.", correct: true },
            { unit: 5, type: "tf", question: "(Ø§Ù„Ø¶Ø§Ù„ÙˆÙ†) Ù‡Ù… Ø§Ù„Ø°ÙŠÙ† ØªØ±ÙƒÙˆØ§ Ø§Ù„Ø­Ù‚ Ø¹Ù† Ø¹Ù…Ø¯ ÙˆØ¹Ù†Ø§Ø¯.", correct: false },
            { unit: 5, type: "tf", question: "Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„ÙØ§ØªØ­Ø© Ø±ÙƒÙ† Ù…Ù† Ø£Ø±ÙƒØ§Ù† Ø§Ù„ØµÙ„Ø§Ø© Ù„Ø§ ØªØµØ­ Ø¥Ù„Ø§ Ø¨Ù‡Ø§.", correct: true },

            // ÙˆØ±Ù‚Ø© Ø¹Ù…Ù„ Ø§Ù„Ø¯Ø±Ø³ (6)
            { unit: 6, type: "mcq", question: "Ø§Ù„Ø­ÙƒÙ…Ø© Ù…Ù† ØªÙ‚Ø¯ÙŠØ± Ù…Ù†Ø§Ø²Ù„ Ø§Ù„Ù‚Ù…Ø± ÙƒÙ…Ø§ Ø°ÙƒØ±Øª Ø§Ù„Ø¢ÙŠØ§Øª:", options: ["Ù„Ù„Ø¥Ù†Ø§Ø±Ø© Ù„ÙŠÙ„Ø§Ù‹ ÙÙ‚Ø·", "Ù„ØªØ¹Ù„Ù…ÙˆØ§ Ø¹Ø¯Ø¯ Ø§Ù„Ø³Ù†ÙŠÙ† ÙˆØ§Ù„Ø­Ø³Ø§Ø¨", "Ù„Ø²ÙŠÙ†Ø© Ø§Ù„Ø³Ù…Ø§Ø¡"], correct: 1 },
            { unit: 6, type: "mcq", question: "ÙˆØµÙ Ø§Ù„Ù„Ù‡ Ø§Ù„Ø°ÙŠÙ† Ù„Ø§ ÙŠØ±Ø¬ÙˆÙ† Ù„Ù‚Ø§Ø¡Ù‡ Ø¨Ø£Ù†Ù‡Ù…:", options: ["Ø±Ø¶ÙˆØ§ Ø¨Ø§Ù„Ø­ÙŠØ§Ø© Ø§Ù„Ø¯Ù†ÙŠØ§ ÙˆØ§Ø·Ù…Ø£Ù†ÙˆØ§ Ø¨Ù‡Ø§", "ÙŠØ¬Ø§Ù‡Ø¯ÙˆÙ† ÙÙŠ Ø³Ø¨ÙŠÙ„Ù‡", "ÙŠØªÙÙƒØ±ÙˆÙ† ÙÙŠ Ø§Ù„Ø®Ù„Ù‚"], correct: 0 },
            { unit: 6, type: "mcq", question: "Ø¢Ø®Ø± Ø¯Ø¹Ø§Ø¡ Ø£Ù‡Ù„ Ø§Ù„Ø¬Ù†Ø© Ù‡Ùˆ:", options: ["Ø³Ø¨Ø­Ø§Ù†Ùƒ Ø§Ù„Ù„Ù‡Ù…", "Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡ Ø±Ø¨ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠÙ†", "Ø³Ù„Ø§Ù… Ø¹Ù„ÙŠÙƒÙ…"], correct: 1 },
            { unit: 6, type: "tf", question: "Ø®Ù„Ù‚ Ø§Ù„Ù„Ù‡ Ø§Ù„Ø³Ù…Ø§ÙˆØ§Øª ÙˆØ§Ù„Ø£Ø±Ø¶ ÙÙŠ Ø³ØªØ© Ø£ÙŠØ§Ù….", correct: true },
            { unit: 6, type: "tf", question: "Ø§Ù„Ø´ÙØ§Ø¹Ø© ÙŠÙˆÙ… Ø§Ù„Ù‚ÙŠØ§Ù…Ø© ØªÙƒÙˆÙ† Ù…ÙØªÙˆØ­Ø© Ù„Ù„Ø¬Ù…ÙŠØ¹ Ø¯ÙˆÙ† Ø¥Ø°Ù†.", correct: false },
            { unit: 6, type: "tf", question: "Ø§Ù„Ø±ÙƒÙˆÙ† Ø¥Ù„Ù‰ Ø§Ù„Ø¯Ù†ÙŠØ§ ÙˆØ§Ù„ØºÙÙ„Ø© Ø¹Ù† Ø¢ÙŠØ§Øª Ø§Ù„Ù„Ù‡ Ø³Ø¨Ø¨ Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù†Ø§Ø±.", correct: true },

            // ÙˆØ±Ù‚Ø© Ø¹Ù…Ù„ Ø§Ù„Ø¯Ø±Ø³ (7)
            { unit: 7, type: "mcq", question: "Ø§Ù„Ù…Ù‚ØµÙˆØ¯ Ø¨Ù€ (Ø§Ù„Ø²ÙŠØ§Ø¯Ø©) ÙÙŠ Ù‚ÙˆÙ„Ù‡ ØªØ¹Ø§Ù„Ù‰ {Ù„ÙÙ‘Ù„ÙÙ‘Ø°ÙÙŠÙ†Ù Ø£ÙØ­Ù’Ø³ÙÙ†ÙÙˆØ§ Ø§Ù„Ù’Ø­ÙØ³Ù’Ù†ÙÙ‰Ù° ÙˆÙØ²ÙÙŠÙØ§Ø¯ÙØ©ÙŒ}:", options: ["Ø§Ù„Ù‚ØµÙˆØ± ÙˆØ§Ù„Ø­ÙˆØ± Ø§Ù„Ø¹ÙŠÙ†", "Ø§Ù„Ù†Ø¸Ø± Ø¥Ù„Ù‰ ÙˆØ¬Ù‡ Ø§Ù„Ù„Ù‡ Ø§Ù„ÙƒØ±ÙŠÙ…", "Ø·ÙˆÙ„ Ø§Ù„Ø¹Ù…Ø± ÙÙŠ Ø§Ù„Ø¬Ù†Ø©"], correct: 1 },
            { unit: 7, type: "mcq", question: "Ù…Ø¹Ù†Ù‰ ÙƒÙ„Ù…Ø© (Ù‚ØªØ±) ÙÙŠ Ø§Ù„Ø¢ÙŠØ§Øª:", options: ["Ø³ÙˆØ§Ø¯ ÙˆØºØ¨Ø§Ø±", "Ù†ÙˆØ± ÙˆØ¶ÙŠØ§Ø¡", "Ø­Ø²Ù† ÙˆØ¨ÙƒØ§Ø¡"], correct: 0 },
            { unit: 7, type: "mcq", question: "Ø§Ø­ØªØ¬ Ø§Ù„Ù„Ù‡ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø±ÙƒÙŠÙ† Ù„Ø¥Ø«Ø¨Ø§Øª ØªÙˆØ­ÙŠØ¯ Ø§Ù„Ø£Ù„ÙˆÙ‡ÙŠØ© Ø¨Ø¥Ù‚Ø±Ø§Ø±Ù‡Ù… Ø¨Ù€:", options: ["ØªÙˆØ­ÙŠØ¯ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ ÙˆØ§Ù„ØµÙØ§Øª", "ØªÙˆØ­ÙŠØ¯ Ø§Ù„Ø±Ø¨ÙˆØ¨ÙŠØ©", "Ø§Ù„Ø¥ÙŠÙ…Ø§Ù† Ø¨Ø§Ù„ÙƒØªØ¨"], correct: 1 },
            { unit: 7, type: "tf", question: "Ø§Ù„Ø´Ø±ÙƒØ§Ø¡ (Ø§Ù„Ø£ØµÙ†Ø§Ù…) Ø³ÙŠØ¯Ø§ÙØ¹ÙˆÙ† Ø¹Ù† Ø§Ù„Ù…Ø´Ø±ÙƒÙŠÙ† ÙŠÙˆÙ… Ø§Ù„Ù‚ÙŠØ§Ù…Ø©.", correct: false },
            { unit: 7, type: "tf", question: "Ø§Ù„Ù„Ù‡ ÙŠØ¶Ø§Ø¹Ù Ø§Ù„Ø­Ø³Ù†Ø§Øª ÙˆÙŠØ¬Ø§Ø²ÙŠ Ø§Ù„Ø³ÙŠØ¦Ø© Ø¨Ù…Ø«Ù„Ù‡Ø§ Ø¹Ø¯Ù„Ø§Ù‹ Ù…Ù†Ù‡.", correct: true },
            { unit: 7, type: "tf", question: "Ø§Ù„Ø¢ÙŠØ§Øª ØªØ«Ø¨Øª Ø£Ù† Ø§Ù„Ù…Ø´Ø±ÙƒÙŠÙ† ÙƒØ§Ù†ÙˆØ§ ÙŠÙ†ÙƒØ±ÙˆÙ† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ù„Ù‡ ØªÙ…Ø§Ù…Ø§Ù‹.", correct: false },

            // ÙˆØ±Ù‚Ø© Ø¹Ù…Ù„ Ø§Ù„Ø¯Ø±Ø³ (8)
            { unit: 8, type: "mcq", question: "\"Ø£ÙˆÙ„ÙŠØ§Ø¡ Ø§Ù„Ù„Ù‡\" ÙƒÙ…Ø§ Ø¹Ø±ÙØªÙ‡Ù… Ø§Ù„Ø¢ÙŠØ§Øª Ù‡Ù…:", options: ["Ø§Ù„Ø°ÙŠÙ† ØªØ±ÙƒÙˆØ§ Ø§Ù„Ø¯Ù†ÙŠØ§ ÙˆØ§Ø¹ØªØ²Ù„ÙˆØ§ Ø§Ù„Ù†Ø§Ø³", "Ø§Ù„Ø°ÙŠÙ† Ø¢Ù…Ù†ÙˆØ§ ÙˆÙƒØ§Ù†ÙˆØ§ ÙŠØªÙ‚ÙˆÙ†", "Ø£ØµØ­Ø§Ø¨ Ø§Ù„ÙƒØ±Ø§Ù…Ø§Øª Ø§Ù„Ø®Ø§Ø±Ù‚Ø©"], correct: 1 },
            { unit: 8, type: "mcq", question: "Ø§Ù„Ø­ÙƒÙ…Ø© Ù…Ù† Ø¬Ø¹Ù„ Ø§Ù„Ù„Ù‡ Ø§Ù„Ù„ÙŠÙ„ ÙƒÙ…Ø§ ÙˆØ±Ø¯ ÙÙŠ Ø§Ù„Ø¢ÙŠØ§Øª:", options: ["Ù„Ù„Ø¹Ù…Ù„ ÙˆØ§Ù„ÙƒØ³Ø¨", "Ù„Ù„Ø³ÙƒÙ† ÙˆØ§Ù„Ø±Ø§Ø­Ø©", "Ù„Ù„Ø®ÙˆÙ ÙˆØ§Ù„ÙˆØ­Ø´Ø©"], correct: 1 },
            { unit: 8, type: "mcq", question: "ÙˆØµÙ Ø§Ù„Ù„Ù‡ Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø´Ø±ÙƒÙŠÙ† \"Ø§ØªØ®Ø° Ø§Ù„Ù„Ù‡ ÙˆÙ„Ø¯Ø§Ù‹\" Ø¨Ø£Ù†Ù‡:", options: ["Ø§Ø¬ØªÙ‡Ø§Ø¯ Ù…Ù‚Ø¨ÙˆÙ„", "Ø§ÙØªØ±Ø§Ø¡ ÙˆÙƒØ°Ø¨ Ø¨Ù„Ø§ Ø³Ù„Ø·Ø§Ù†", "ØªØ¹Ø¸ÙŠÙ… Ù„Ù„Ù‡"], correct: 1 },
            { unit: 8, type: "tf", question: "Ø§Ù„Ø®ÙˆÙ ÙˆØ§Ù„Ø­Ø²Ù† Ù…Ù†ÙÙŠØ§Ù† Ø¹Ù† Ø£ÙˆÙ„ÙŠØ§Ø¡ Ø§Ù„Ù„Ù‡ ÙÙŠ Ø§Ù„Ø¯Ù†ÙŠØ§ ÙˆØ§Ù„Ø¢Ø®Ø±Ø©.", correct: true },
            { unit: 8, type: "tf", question: "ÙŠØ¬ÙˆØ² Ø§Ù„Ø­Ø²Ù† Ø§Ù„Ø´Ø¯ÙŠØ¯ Ø§Ù„Ø°ÙŠ ÙŠØ¤Ø¯ÙŠ Ù„Ù„ÙŠØ£Ø³ Ø¨Ø³Ø¨Ø¨ Ù‚ÙˆÙ„ Ø§Ù„Ù…ÙƒØ°Ø¨ÙŠÙ†.", correct: false },
            { unit: 8, type: "tf", question: "Ø§Ù„Ø­Ø¬Ø© Ø§Ù„Ø¹Ù„Ù…ÙŠØ© ÙˆØ§Ù„Ø¯Ù„ÙŠÙ„ Ø³Ù…Ø§Ù‡ Ø§Ù„Ù„Ù‡ ÙÙŠ Ø§Ù„Ø¢ÙŠØ§Øª \"Ø³Ù„Ø·Ø§Ù†Ø§Ù‹\".", correct: true },

            // ÙˆØ±Ù‚Ø© Ø¹Ù…Ù„ Ø§Ù„Ø¯Ø±Ø³ (9)
            { unit: 9, type: "mcq", question: "Ù…Ø¹Ù†Ù‰ Ù‚ÙˆÙ„Ù‡ ØªØ¹Ø§Ù„Ù‰ (Ø§Ù„ÙˆØ±Ø¯ Ø§Ù„Ù…ÙˆØ±ÙˆØ¯) ÙÙŠ Ø³ÙŠØ§Ù‚ Ù‚ØµØ© ÙØ±Ø¹ÙˆÙ†:", options: ["Ø§Ù„Ù…Ø§Ø¡ Ø§Ù„Ø¹Ø°Ø¨", "Ù…Ø¯Ø®Ù„ Ø§Ù„Ù†Ø§Ø±", "Ù‚ØµÙˆØ± Ø§Ù„Ø¬Ù†Ø©"], correct: 1 },
            { unit: 9, type: "mcq", question: "ÙˆØµÙ Ø§Ù„Ù„Ù‡ ÙŠÙˆÙ… Ø§Ù„Ù‚ÙŠØ§Ù…Ø© ÙÙŠ Ø§Ù„Ø¢ÙŠØ§Øª Ø¨Ø£Ù†Ù‡ ÙŠÙˆÙ…:", options: ["Ù‚ØµÙŠØ±", "Ù…Ø´Ù‡ÙˆØ¯", "Ù…Ø¸Ù„Ù…"], correct: 1 },
            { unit: 9, type: "mcq", question: "Ù…Ø¹Ù†Ù‰ ÙƒÙ„Ù…Ø© (ØºÙŠØ± Ù…Ø¬Ø°ÙˆØ°) ÙÙŠ ÙˆØµÙ Ø¹Ø·Ø§Ø¡ Ø£Ù‡Ù„ Ø§Ù„Ø¬Ù†Ø©:", options: ["ØºÙŠØ± Ù…Ù‚Ø·ÙˆØ¹", "ØºÙŠØ± ÙƒØ«ÙŠØ±", "ØºÙŠØ± Ù…Ø¹Ù„ÙˆÙ…"], correct: 0 },
            { unit: 9, type: "tf", question: "Ù‚Ø§Ø¯ ÙØ±Ø¹ÙˆÙ† Ù‚ÙˆÙ…Ù‡ Ø¥Ù„Ù‰ Ø§Ù„Ù†Ø¬Ø§Ø© ÙÙŠ Ø§Ù„Ø¯Ù†ÙŠØ§ ÙˆØ§Ù„Ø¢Ø®Ø±Ø©.", correct: false },
            { unit: 9, type: "tf", question: "Ø§Ù„Ø£ØµÙ†Ø§Ù… Ø¯ÙØ¹Øª Ø§Ù„Ø¹Ø°Ø§Ø¨ Ø¹Ù† Ø¹Ø§Ø¨Ø¯ÙŠÙ‡Ø§ Ù„Ù…Ø§ Ù†Ø²Ù„ Ø¨Ù‡Ù….", correct: false },
            { unit: 9, type: "tf", question: "ÙŠÙˆÙ… Ø§Ù„Ù‚ÙŠØ§Ù…Ø© Ù„Ø§ ØªØªÙƒÙ„Ù… ÙÙŠÙ‡ Ù†ÙØ³ Ø¥Ù„Ø§ Ø¨Ø¥Ø°Ù† Ø§Ù„Ø±Ø­Ù…Ù†.", correct: true },

            // ÙˆØ±Ù‚Ø© Ø¹Ù…Ù„ Ø§Ù„Ø¯Ø±Ø³ (10)
            { unit: 10, type: "mcq", question: "Ù…Ø¹Ù†Ù‰ Ù‚ÙˆÙ„Ù‡ ØªØ¹Ø§Ù„Ù‰ (Ù„Ø§ ØªØ±ÙƒÙ†ÙˆØ§) Ø¥Ù„Ù‰ Ø§Ù„Ø°ÙŠÙ† Ø¸Ù„Ù…ÙˆØ§:", options: ["Ù„Ø§ ØªØ­Ø§Ø±Ø¨ÙˆÙ‡Ù…", "Ù„Ø§ ØªÙ…ÙŠÙ„ÙˆØ§ Ø¥Ù„ÙŠÙ‡Ù…", "Ù„Ø§ ØªØ¯Ø¹ÙˆÙ‡Ù…"], correct: 1 },
            { unit: 10, type: "mcq", question: "Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø´Ø±Ø¹ÙŠØ© Ø§Ù„Ù…Ø³ØªÙ†Ø¨Ø·Ø© Ù…Ù† Ù‚ÙˆÙ„Ù‡ (Ø¥Ù† Ø§Ù„Ø­Ø³Ù†Ø§Øª ÙŠØ°Ù‡Ø¨Ù† Ø§Ù„Ø³ÙŠØ¦Ø§Øª) Ù‡ÙŠ:", options: ["Ø§Ù„Ø·Ø§Ø¹Ø§Øª ØªÙƒÙØ± Ø§Ù„Ø°Ù†ÙˆØ¨", "Ø§Ù„Ø°Ù†ÙˆØ¨ ØªØ¨Ø·Ù„ Ø§Ù„Ø·Ø§Ø¹Ø§Øª", "Ø§Ù„Ø³ÙŠØ¦Ø© ØªÙ…Ø­Ùˆ Ø§Ù„Ø­Ø³Ù†Ø©"], correct: 0 },
            { unit: 10, type: "mcq", question: "Ø§Ù„ØºØ§ÙŠØ© Ù…Ù† Ø°ÙƒØ± Ù‚ØµØµ Ø§Ù„Ø±Ø³Ù„ Ù„Ù„Ù†Ø¨ÙŠ ï·º ÙƒÙ…Ø§ ÙÙŠ Ø§Ù„Ø¢ÙŠØ§Øª:", options: ["Ù…Ø¹Ø±ÙØ© Ø§Ù„Ø£Ù†Ø³Ø§Ø¨", "ØªØ«Ø¨ÙŠØª ÙØ¤Ø§Ø¯Ù‡", "Ø§Ù„ØªØ³Ù„ÙŠØ© ÙˆØ§Ù„ØªØ±ÙÙŠÙ‡"], correct: 1 },
            { unit: 10, type: "tf", question: "Ø§Ù„Ø§Ø³ØªÙ‚Ø§Ù…Ø© ØªØ¹Ù†ÙŠ Ø§Ù„Ø«Ø¨Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ø¯ÙŠÙ† ÙˆÙ…ÙˆØ§ÙÙ‚Ø© Ø§Ù„Ø£Ù…Ø± Ø§Ù„Ø´Ø±Ø¹ÙŠ Ø¯ÙˆÙ† ØºÙ„Ùˆ.", correct: true },
            { unit: 10, type: "tf", question: "ÙŠØ¬ÙˆØ² Ù„Ù„Ù…Ø³Ù„Ù… Ø£Ù† ÙŠÙ…ÙŠÙ„ Ø¨Ù‚Ù„Ø¨Ù‡ Ù„Ù„Ø¸Ø§Ù„Ù…ÙŠÙ† ÙˆÙŠØ±Ø¶Ù‰ Ø¨ÙØ¹Ø§Ù„Ù‡Ù….", correct: false },
            { unit: 10, type: "tf", question: "Ø§Ù„ØµÙ„Ø§Ø© ØªØ¹ØªØ¨Ø± Ù…Ù† Ø£ÙƒØ¨Ø± Ø§Ù„Ø­Ø³Ù†Ø§Øª Ø§Ù„Ù…Ø§Ø­ÙŠØ© Ù„Ù„Ø®Ø·Ø§ÙŠØ§.", correct: true },

            // ÙˆØ±Ù‚Ø© Ø¹Ù…Ù„ Ø§Ù„Ø¯Ø±Ø³ (11)
            { unit: 11, type: "mcq", question: "Ø§Ù„ÙˆØµÙ Ø§Ù„Ø°ÙŠ ÙˆØµÙ Ø¨Ù‡ ÙŠÙˆØ³Ù Ù†ÙØ³Ù‡ Ù„Ø·Ù„Ø¨ ØªÙˆÙ„ÙŠ Ø§Ù„Ø®Ø²Ø§Ø¦Ù†:", options: ["Ù‚ÙˆÙŠ Ø£Ù…ÙŠÙ†", "Ø­ÙÙŠØ¸ Ø¹Ù„ÙŠÙ…", "ØºÙ†ÙŠ ÙƒØ±ÙŠÙ…"], correct: 1 },
            { unit: 11, type: "mcq", question: "Ù…Ø¹Ù†Ù‰ ÙƒÙ„Ù…Ø© (Ø­ØµÙ€Ø­Øµ) ÙÙŠ Ù‚ÙˆÙ„Ù‡ (Ø§Ù„Ø¢Ù† Ø­ØµØ­Øµ Ø§Ù„Ø­Ù‚):", options: ["Ø¶Ø§Ø¹ ÙˆØ§Ø®ØªÙÙ‰", "Ø¸Ù‡Ø± ÙˆØ§Ù†ÙƒØ´Ù", "Ø§Ù„ØªØ¨Ø³ ÙˆØºÙ…Ø¶"], correct: 1 },
            { unit: 11, type: "mcq", question: "Ø§Ù„Ø®Ø·Ø© Ø§Ù„ØªÙŠ ÙˆØ¶Ø¹Ù‡Ø§ ÙŠÙˆØ³Ù Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ø³Ù„Ø§Ù… Ù„Ù…ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù‚Ø­Ø· Ø§Ø¹ØªÙ…Ø¯Øª Ø¹Ù„Ù‰:", options: ["Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø¶Ø±Ø§Ø¦Ø¨", "Ø§Ù„Ø§Ø¯Ø®Ø§Ø± ÙˆØ­ÙØ¸ Ø§Ù„Ù†Ø¹Ù…Ø©", "Ø·Ù„Ø¨ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø§Øª Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ©"], correct: 1 },
            { unit: 11, type: "tf", question: "Ø®Ø±Ø¬ ÙŠÙˆØ³Ù Ù…Ù† Ø§Ù„Ø³Ø¬Ù† ÙÙˆØ±Ø§Ù‹ Ø¨Ù…Ø¬Ø±Ø¯ Ø£Ù† Ø·Ù„Ø¨Ù‡ Ø§Ù„Ù…Ù„Ùƒ.", correct: false },
            { unit: 11, type: "tf", question: "ÙŠØ¬ÙˆØ² Ø·Ù„Ø¨ Ø§Ù„ÙˆÙ„Ø§ÙŠØ© (Ø§Ù„Ù…Ù†ØµØ¨) Ù„Ù…Ù† Ø¹Ù„Ù… Ù…Ù† Ù†ÙØ³Ù‡ Ø§Ù„Ù‚Ø¯Ø±Ø© ÙˆØ§Ù„Ø£Ù…Ø§Ù†Ø©.", correct: true },
            { unit: 11, type: "tf", question: "Ø§Ù„Ù†ÙØ³ Ø§Ù„Ø¨Ø´Ø±ÙŠØ© Ø£Ù…Ø§Ø±Ø© Ø¨Ø§Ù„Ø³ÙˆØ¡ Ø¥Ù„Ø§ Ù…Ø§ Ø±Ø­Ù… Ø§Ù„Ù„Ù‡ ÙˆØ¹ØµÙ….", correct: true },

            // ÙˆØ±Ù‚Ø© Ø¹Ù…Ù„ Ø§Ù„Ø¯Ø±Ø³ (12)
            { unit: 12, type: "mcq", question: "Ø§Ù„Ø´Ø±Ø· Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ Ù„Ù„Ø¯Ø¹ÙˆØ© Ø¥Ù„Ù‰ Ø§Ù„Ù„Ù‡ ÙƒÙ…Ø§ ÙÙŠ Ù‚ÙˆÙ„Ù‡ (Ø£Ø¯Ø¹Ùˆ Ø¥Ù„Ù‰ Ø§Ù„Ù„Ù‡ Ø¹Ù„Ù‰ ...):", options: ["Ù…Ø§Ù„", "Ø¨ØµÙŠØ±Ø© ÙˆØ¹Ù„Ù…", "Ù‚ÙˆØ© ÙˆØ³Ù„Ø·Ø©"], correct: 1 },
            { unit: 12, type: "mcq", question: "Ù…Ø¹Ù†Ù‰ Ù‚ÙˆÙ„Ù‡ ØªØ¹Ø§Ù„Ù‰ (Ø§Ø³ØªÙŠØ£Ø³ Ø§Ù„Ø±Ø³Ù„):", options: ["ÙÙ‚Ø¯ÙˆØ§ Ø§Ù„Ø£Ù…Ù„ ÙÙŠ Ø¥ÙŠÙ…Ø§Ù† Ø£Ù‚ÙˆØ§Ù…Ù‡Ù…", "ÙŠØ¦Ø³ÙˆØ§ Ù…Ù† Ø±Ø­Ù…Ø© Ø§Ù„Ù„Ù‡", "Ù…Ø§ØªÙˆØ§ Ø¬Ù…ÙŠØ¹Ø§Ù‹"], correct: 0 },
            { unit: 12, type: "mcq", question: "ÙˆØµÙ Ø§Ù„Ù„Ù‡ Ù‚ØµØµ Ø§Ù„Ù‚Ø±Ø¢Ù† ÙÙŠ Ø®ØªØ§Ù… Ø§Ù„Ø³ÙˆØ±Ø© Ø¨Ø£Ù†Ù‡Ø§:", options: ["Ø¹Ø¨Ø±Ø© Ù„Ø£ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù„Ø¨Ø§Ø¨", "Ø£Ø³Ø§Ø·ÙŠØ± Ø§Ù„Ø£ÙˆÙ„ÙŠÙ†", "ØªØ³Ù„ÙŠØ© Ù„Ù„Ù†Ø§Ø³"], correct: 0 },
            { unit: 12, type: "tf", question: "ØªÙˆØ­ÙŠØ¯ Ø§Ù„Ø±Ø¨ÙˆØ¨ÙŠØ© ÙŠÙƒÙÙŠ Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¬Ù†Ø© Ø¯ÙˆÙ† ØªÙˆØ­ÙŠØ¯ Ø§Ù„Ø£Ù„ÙˆÙ‡ÙŠØ©.", correct: false },
            { unit: 12, type: "tf", question: "Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… Ù…ØµØ¯Ù‚ Ù„Ù…Ø§ Ø¨ÙŠÙ† ÙŠØ¯ÙŠÙ‡ Ù…Ù† Ø§Ù„ÙƒØªØ¨ Ø§Ù„Ø³Ù…Ø§ÙˆÙŠØ© ÙˆÙ…Ù‡ÙŠÙ…Ù† Ø¹Ù„ÙŠÙ‡Ø§.", correct: true },
            { unit: 12, type: "tf", question: "Ø§Ù„Ø£Ù…Ù† Ù…Ù† Ù…ÙƒØ± Ø§Ù„Ù„Ù‡ ÙˆØ¹Ø°Ø§Ø¨Ù‡ ØµÙØ© Ù…Ø°Ù…ÙˆÙ…Ø© Ø­Ø°Ø±Øª Ù…Ù†Ù‡Ø§ Ø§Ù„Ø¢ÙŠØ§Øª.", correct: true },

            // ÙˆØ±Ù‚Ø© Ø¹Ù…Ù„ Ø§Ù„Ø¯Ø±Ø³ (13)
            { unit: 13, type: "mcq", question: "Ù…Ø¹Ù†Ù‰ (Ø§Ù„Ù…Ø¹Ù‚Ø¨Ø§Øª) ÙÙŠ Ù‚ÙˆÙ„Ù‡ ØªØ¹Ø§Ù„Ù‰ (Ù„Ù‡ Ù…Ø¹Ù‚Ø¨Ø§Øª Ù…Ù† Ø¨ÙŠÙ† ÙŠØ¯ÙŠÙ‡):", options: ["Ø§Ù„Ø´ÙŠØ§Ø·ÙŠÙ†", "Ø§Ù„Ù…Ù„Ø§Ø¦ÙƒØ© Ø§Ù„Ø­ÙØ¸Ø©", "Ø§Ù„Ù†Ø¬ÙˆÙ…"], correct: 1 },
            { unit: 13, type: "mcq", question: "Ø§Ù„Ù‚Ø§Ù†ÙˆÙ† Ø§Ù„Ø¥Ù„Ù‡ÙŠ ÙÙŠ ØªØºÙŠÙŠØ± Ø§Ù„Ù†Ø¹Ù… Ù…Ø±ØªØ¨Ø· Ø¨Ù€:", options: ["ØªØºÙŠØ± Ù…Ø§ ÙÙŠ Ù†ÙÙˆØ³ Ø§Ù„Ù†Ø§Ø³", "ØªØºÙŠØ± Ø§Ù„Ø²Ù…Ø§Ù†", "ØªØºÙŠØ± Ø§Ù„Ù…ÙƒØ§Ù†"], correct: 0 },
            { unit: 13, type: "mcq", question: "ØªØ³Ø¨ÙŠØ­ Ø§Ù„Ø±Ø¹Ø¯ Ø¨Ø­Ù…Ø¯ Ø§Ù„Ù„Ù‡ Ù‡Ùˆ ØªØ³Ø¨ÙŠØ­:", options: ["Ø­Ù‚ÙŠÙ‚ÙŠ Ø¯Ø§Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø¶ÙˆØ¹", "Ù…Ø¬Ø§Ø²ÙŠ", "Ø®ÙŠØ§Ù„ÙŠ"], correct: 0 },
            { unit: 13, type: "tf", question: "Ø§Ù„Ù„Ù‡ ÙŠØ¹Ù„Ù… Ù…Ø§ ØªØºÙŠØ¶ Ø§Ù„Ø£Ø±Ø­Ø§Ù… ÙˆÙ…Ø§ ØªØ²Ø¯Ø§Ø¯.", correct: true },
            { unit: 13, type: "tf", question: "Ø¯Ø¹Ø§Ø¡ ØºÙŠØ± Ø§Ù„Ù„Ù‡ ÙƒÙ…Ù† ÙŠØ¨Ø³Ø· ÙƒÙÙŠÙ‡ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø§Ø¡ Ù„ÙŠØ¨Ù„Øº ÙØ§Ù‡ ÙÙ„Ø§ ÙŠØ¨Ù„ØºÙ‡.", correct: true },
            { unit: 13, type: "tf", question: "Ø§Ù„ÙƒØ§ÙØ± Ù„Ø§ ÙŠØ³Ø¬Ø¯ Ù„Ù„Ù‡ Ù…Ø·Ù„Ù‚Ø§Ù‹ Ù„Ø§ Ø·ÙˆØ¹Ø§Ù‹ ÙˆÙ„Ø§ ÙƒØ±Ù‡Ø§Ù‹.", correct: false },

            // ÙˆØ±Ù‚Ø© Ø¹Ù…Ù„ Ø§Ù„Ø¯Ø±Ø³ (14)
            { unit: 14, type: "mcq", question: "Ù…Ø¹Ù†Ù‰ (Ø¬Ù†Ø§Øª Ø¹Ø¯Ù†):", options: ["Ø¬Ù†Ø§Øª Ø¥Ù‚Ø§Ù…Ø© Ø¯Ø§Ø¦Ù…Ø©", "Ø¨Ø³Ø§ØªÙŠÙ† Ù…Ø¤Ù‚ØªØ©", "Ø­Ø¯Ø§Ø¦Ù‚ Ø§Ù„Ø¯Ù†ÙŠØ§"], correct: 0 },
            { unit: 14, type: "mcq", question: "Ù‚ÙˆÙ„Ù‡ ØªØ¹Ø§Ù„Ù‰ (ÙŠØ¯Ø±Ø¤ÙˆÙ† Ø¨Ø§Ù„Ø­Ø³Ù†Ø© Ø§Ù„Ø³ÙŠØ¦Ø©) ÙŠØ¹Ù†ÙŠ:", options: ["ÙŠØ¯ÙØ¹ÙˆÙ† Ø§Ù„Ø³ÙŠØ¦Ø© Ø¨Ø§Ù„Ø¥Ø­Ø³Ø§Ù†", "ÙŠØ±Ø¯ÙˆÙ† Ø§Ù„Ø³ÙŠØ¦Ø© Ø¨Ù…Ø«Ù„Ù‡Ø§", "ÙŠÙ†Ø³ÙˆÙ† Ø§Ù„Ø³ÙŠØ¦Ø©"], correct: 0 },
            { unit: 14, type: "mcq", question: "ØªØ·Ù…Ø¦Ù† Ø§Ù„Ù‚Ù„ÙˆØ¨ ÙˆØªØ³ÙƒÙ† Ø¨Ù€:", options: ["Ø¬Ù…Ø¹ Ø§Ù„Ù…Ø§Ù„", "Ø°ÙƒØ± Ø§Ù„Ù„Ù‡", "Ø§Ù„Ø³ÙØ± ÙˆØ§Ù„ØªØ±Ø­Ø§Ù„"], correct: 1 },
            { unit: 14, type: "tf", question: "Ø§Ù„Ø¹Ù…Ù‰ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ Ø§Ù„Ù…Ø°ÙƒÙˆØ± ÙÙŠ Ø§Ù„Ù‚Ø±Ø¢Ù† Ù‡Ùˆ Ø¹Ù…Ù‰ Ø§Ù„Ø¨ØµØ±.", correct: false },
            { unit: 14, type: "tf", question: "ØµÙ„Ø© Ø§Ù„Ø±Ø­Ù… ÙˆØ§Ù„ÙˆÙØ§Ø¡ Ø¨Ø§Ù„Ø¹Ù‡Ø¯ Ù…Ù† ØµÙØ§Øª Ø£ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù„Ø¨Ø§Ø¨.", correct: true },
            { unit: 14, type: "tf", question: "Ø¨Ø³Ø· Ø§Ù„Ø±Ø²Ù‚ ÙˆØªØ¶ÙŠÙŠÙ‚Ù‡ Ø®Ø§Ø¶Ø¹ Ù„Ù…Ø´ÙŠØ¦Ø© Ø§Ù„Ù„Ù‡ ÙˆØ­ÙƒÙ…ØªÙ‡.", correct: true },

            // ÙˆØ±Ù‚Ø© Ø¹Ù…Ù„ Ø§Ù„Ø¯Ø±Ø³ (15)
            { unit: 15, type: "mcq", question: "Ø´Ø¨Ù‡ Ø§Ù„Ù„Ù‡ \"Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ø·ÙŠØ¨Ø©\" ÙÙŠ Ø§Ù„Ø¢ÙŠØ§Øª Ø¨Ù€:", options: ["Ø´Ø¬Ø±Ø© Ø·ÙŠØ¨Ø© Ø£ØµÙ„Ù‡Ø§ Ø«Ø§Ø¨Øª", "Ø´Ø¬Ø±Ø© Ø®Ø¨ÙŠØ«Ø© Ø§Ø¬ØªØ«Øª", "Ø¬Ø¨Ù„ Ø±Ø§Ø³Ø®"], correct: 0 },
            { unit: 15, type: "mcq", question: "Ø§Ù„Ù…Ù‚ØµÙˆØ¯ Ø¨Ù€ (Ø¯Ø§Ø± Ø§Ù„Ø¨ÙˆØ§Ø±) Ø§Ù„ØªÙŠ Ø£Ø­Ù„ Ø§Ù„ÙƒÙØ§Ø± Ù‚ÙˆÙ…Ù‡Ù… ÙÙŠÙ‡Ø§:", options: ["Ø§Ù„Ø¯Ù†ÙŠØ§", "Ø¬Ù‡Ù†Ù…", "Ø§Ù„Ù‚Ø¨Ø±"], correct: 1 },
            { unit: 15, type: "mcq", question: "(Ù„ÙØ¦ÙÙ† Ø´ÙÙƒÙØ±Ù’ØªÙÙ…Ù’ Ù„ÙØ£ÙØ²ÙÙŠØ¯ÙÙ†ÙÙ‘ÙƒÙÙ…Ù’) ØªØ¯Ù„ Ø¹Ù„Ù‰ Ø£Ù† Ø§Ù„Ø´ÙƒØ± Ø³Ø¨ï¿½ï¿½ Ù„Ù€:", options: ["Ø¨Ù‚Ø§Ø¡ Ø§Ù„Ù†Ø¹Ù…Ø© ÙˆØ²ÙŠØ§Ø¯ØªÙ‡Ø§", "Ø²ÙˆØ§Ù„ Ø§Ù„Ù†Ø¹Ù…Ø©", "Ø«Ø¨Ø§Øª Ø§Ù„Ù†Ø¹Ù…Ø© Ø¯ÙˆÙ† Ø²ÙŠØ§Ø¯Ø©"], correct: 0 },
            { unit: 15, type: "tf", question: "Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ø®Ø¨ÙŠØ«Ø© (Ø§Ù„ÙƒÙØ±) Ù„Ù‡Ø§ Ø£ØµÙ„ Ø«Ø§Ø¨Øª ÙÙŠ Ø§Ù„Ø£Ø±Ø¶ ÙƒØ§Ù„Ø¬Ø¨Ø§Ù„.", correct: false },
            { unit: 15, type: "tf", question: "ØªØ«Ø¨ÙŠØª Ø§Ù„Ù„Ù‡ Ù„Ù„Ù…Ø¤Ù…Ù†ÙŠÙ† ÙŠÙƒÙˆÙ† ÙÙŠ Ø§Ù„Ø¯Ù†ÙŠØ§ ÙÙ‚Ø· Ø¯ÙˆÙ† Ø§Ù„Ø¢Ø®Ø±Ø©.", correct: false },
            { unit: 15, type: "tf", question: "ÙƒÙØ± Ø§Ù„Ù†Ø¹Ù… ÙˆØ¬Ø­ÙˆØ¯Ù‡Ø§ Ø³Ø¨Ø¨ Ù„Ø²ÙˆØ§Ù„Ù‡Ø§ ÙˆØ­Ù„ÙˆÙ„ Ø§Ù„Ø¹Ø°Ø§Ø¨.", correct: true },

            // ÙˆØ±Ù‚Ø© Ø¹Ù…Ù„ Ø§Ù„Ø¯Ø±Ø³ (16)
            { unit: 16, type: "mcq", question: "Ù…Ø¹Ù†Ù‰ ÙƒÙ„Ù…Ø© (Ù…ÙÙ‡Ù’Ø·ÙØ¹ÙÙŠÙ†Ù) ÙÙŠ ÙˆØµÙ Ø§Ù„Ù†Ø§Ø³ ÙŠÙˆÙ… Ø§Ù„Ù‚ÙŠØ§Ù…Ø©:", options: ["Ù…Ø³Ø±Ø¹ÙŠÙ† Ù…Ø¹ Ø§Ù„Ø°Ù„", "Ù…Ø¨Ø·Ø¦ÙŠÙ†", "Ù†Ø§Ø¦Ù…ÙŠÙ†"], correct: 0 },
            { unit: 16, type: "mcq", question: "(Ù…Ù‚Ø±Ù†ÙŠÙ† ÙÙŠ Ø§Ù„Ø£ØµÙØ§Ø¯) ØªØ¹Ù†ÙŠ Ø£Ù†Ù‡Ù…:", options: ["Ù…ÙƒØ±Ù…ÙŠÙ† ÙÙŠ Ø§Ù„Ù…Ø¬Ø§Ù„Ø³", "Ù…Ù‚ÙŠØ¯ÙŠÙ† Ø¨Ø§Ù„Ø³Ù„Ø§Ø³Ù„ ÙˆØ§Ù„Ù‚ÙŠÙˆØ¯", "Ø·Ù„Ù‚Ø§Ø¡ Ø§Ù„Ø£ÙŠØ¯ÙŠ"], correct: 1 },
            { unit: 16, type: "mcq", question: "Ø«ÙŠØ§Ø¨ Ø£Ù‡Ù„ Ø§Ù„Ù†Ø§Ø± (Ø³Ø±Ø§Ø¨ÙŠÙ„Ù‡Ù…) Ù…ØµÙ†ÙˆØ¹Ø© Ù…Ù†:", options: ["Ù‚Ø·Ø±Ø§Ù† (Ù†Ø­Ø§Ø³ Ù…Ø°Ø§Ø¨)", "Ø­Ø±ÙŠØ±", "ØµÙˆÙ"], correct: 0 },
            { unit: 16, type: "tf", question: "ØªØ£Ø®ÙŠØ± Ø§Ù„Ù„Ù‡ Ù„Ø¹Ø°Ø§Ø¨ Ø§Ù„Ø¸Ø§Ù„Ù…ÙŠÙ† Ø¯Ù„ÙŠÙ„ Ø¹Ù„Ù‰ ØºÙÙ„ØªÙ‡ Ø¹Ù†Ù‡Ù….", correct: false },
            { unit: 16, type: "tf", question: "Ø§Ù„ÙƒÙØ§Ø± Ø£Ù‚Ø³Ù…ÙˆØ§ ÙÙŠ Ø§Ù„Ø¯Ù†ÙŠØ§ Ø£Ù†Ù‡Ù… Ù„Ù† ÙŠØ²ÙˆÙ„ÙˆØ§ ÙˆÙ„Ù† ÙŠØ¨Ø¹Ø«ÙˆØ§.", correct: true },
            { unit: 16, type: "tf", question: "Ø§Ù„ØºØ§ÙŠØ© Ù…Ù† Ø¥Ù†Ø²Ø§Ù„ Ø§Ù„Ù‚Ø±Ø¢Ù† Ù‡ÙŠ Ø§Ù„Ø¨Ù„Ø§Øº ÙˆØ§Ù„Ø¥Ù†Ø°Ø§Ø± ÙˆØ§Ù„ØªØ°ÙƒÙŠØ±.", correct: true }
        ];

        // Ø­Ø§Ù„Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©
        let gameState = {
            currentQuestions: [],
            currentIndex: 0,
            score: 0,
            correctAnswers: 0,
            wrongAnswers: 0,
            streak: 0,
            maxStreak: 0,
            totalScore: 0,
            gamesPlayed: 0,
            timeLeft: 30,
            timer: null,
            autoNextTimer: null,
            gameMode: 'quick',
            selectedUnit: null,
            usedQuestions: new Set()
        };

        // ÙˆØ­Ø¯Ø§Øª Ø§Ù„Ù…Ù‚Ø±Ø±
        const units = [
            { id: 1, name: "Ø§Ù„Ø¯Ø±Ø³ (1)", icon: "ğŸ“–" },
            { id: 2, name: "Ø§Ù„Ø¯Ø±Ø³ (2)", icon: "ğŸ“š" },
            { id: 3, name: "Ø§Ù„Ø¯Ø±Ø³ (3)", icon: "ğŸ“•" },
            { id: 4, name: "Ø§Ù„Ø¯Ø±Ø³ (4)", icon: "ğŸ“±" },
            { id: 5, name: "Ø§Ù„Ø¯Ø±Ø³ (5)", icon: "ğŸ•Œ" },
            { id: 6, name: "Ø§Ù„Ø¯Ø±Ø³ (6)", icon: "ğŸŒ™" },
            { id: 7, name: "Ø§Ù„Ø¯Ø±Ø³ (7)", icon: "â­" },
            { id: 8, name: "Ø§Ù„Ø¯Ø±Ø³ (8)", icon: "ğŸŒŸ" },
            { id: 9, name: "Ø§Ù„Ø¯Ø±Ø³ (9)", icon: "âš¡" },
            { id: 10, name: "Ø§Ù„Ø¯Ø±Ø³ (10)", icon: "ğŸ“¿" },
            { id: 11, name: "Ø§Ù„Ø¯Ø±Ø³ (11)", icon: "ğŸŒ´" },
            { id: 12, name: "Ø§Ù„Ø¯Ø±Ø³ (12)", icon: "ğŸ’" },
            { id: 13, name: "Ø§Ù„Ø¯Ø±Ø³ (13)", icon: "ğŸŒ§ï¸" },
            { id: 14, name: "Ø§Ù„Ø¯Ø±Ø³ (14)", icon: "ğŸŒ³" },
            { id: 15, name: "Ø§Ù„Ø¯Ø±Ø³ (15)", icon: "ğŸŒ¿" },
            { id: 16, name: "Ø§Ù„Ø¯Ø±Ø³ (16)", icon: "ğŸ”¥" }
        ];

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        function init() {
            setupDarkMode();
            renderUnitSelection();
            setupAdminAccess();
            loadUsersFromFirebase();
        }

        // Ø¯ÙˆØ§Ù„ Ø§Ù„ÙƒÙˆÙƒÙŠØ²
        function setCookie(name, value, days) {
            const expires = new Date(Date.now() + days * 864e5).toUTCString();
            document.cookie = name + '=' + encodeURIComponent(value) + '; expires=' + expires + '; path=/; SameSite=Lax';
        }
        function getCookie(name) {
            const value = '; ' + document.cookie;
            const parts = value.split('; ' + name + '=');
            if (parts.length === 2) return decodeURIComponent(parts.pop().split(';').shift());
            return null;
        }
        function deleteCookie(name) {
            document.cookie = name + '=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/';
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù…Ù† Firebase
        function loadUsersFromFirebase() {
            rootRef.child('users').once('value', (snapshot) => {
                usersDB = snapshot.val() || {};
                // Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø¬Ù„Ø³Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
                const savedUserId = getCookie('currentUserId');
                if (savedUserId && usersDB[savedUserId]) {
                    currentUser = usersDB[savedUserId];
                    loadUserStats();
                }
                updateUserDisplay();
            });
            // Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ù…Ø³ØªÙ…Ø±Ø©
            rootRef.child('users').on('value', (snapshot) => {
                usersDB = snapshot.val() || {};
                if (currentUser && usersDB[currentUser.id]) {
                    currentUser = usersDB[currentUser.id];
                    loadUserStats();
                    updateUserDisplay();
                }
            });
        }

        // Ø­ÙØ¸ Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ Firebase
        function saveUserToFirebase(user) {
            rootRef.child('users').child(user.id).set(user);
        }

        // Ø­Ø°Ù Ù…Ø³ØªØ®Ø¯Ù… Ù…Ù† Firebase
        function deleteUserFromFirebase(id) {
            rootRef.child('users').child(id).remove();
        }

        function setupDarkMode() {
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.add('light');
            }
            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
                if (event.matches) {
                    document.documentElement.classList.remove('light');
                    document.documentElement.classList.add('dark');
                } else {
                    document.documentElement.classList.remove('dark');
                    document.documentElement.classList.add('light');
                }
            });
        }

        function setupAdminAccess() {
            document.getElementById('main-header').addEventListener('dblclick', function() {
                document.getElementById('admin-password-modal').classList.add('active');
            });
        }

        function verifyAdminPassword() {
            const password = document.getElementById('admin-password').value;
            if (password === adminPassword) {
                closeModal('admin-password-modal');
                document.getElementById('admin-password').value = '';
                showAdminPanel();
            } else {
                showCustomAlert('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©');
            }
        }

        function showAdminPanel() {
            const users = Object.values(usersDB);
            const totalUsers = users.length;
            const totalGames = users.reduce((sum, u) => sum + u.gamesPlayed, 0);
            const totalPoints = users.reduce((sum, u) => sum + u.totalScore, 0);
            const avgScore = totalGames > 0 ? Math.round(totalPoints / totalGames) : 0;

            let html = `
                <div class="admin-stats">
                    <div class="admin-stat-card">
                        <div class="admin-stat-value">${totalUsers}</div>
                        <div class="admin-stat-label">Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ†</div>
                    </div>
                    <div class="admin-stat-card">
                        <div class="admin-stat-value">${totalGames}</div>
                        <div class="admin-stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¬ÙˆÙ„Ø§Øª</div>
                    </div>
                    <div class="admin-stat-card">
                        <div class="admin-stat-value">${totalPoints}</div>
                        <div class="admin-stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‚Ø§Ø·</div>
                    </div>
                    <div class="admin-stat-card">
                        <div class="admin-stat-value">${avgScore}</div>
                        <div class="admin-stat-label">Ù…ØªÙˆØ³Ø· Ø§Ù„Ù†Ù‚Ø§Ø·</div>
                    </div>
                </div>
            `;

            if (users.length > 0) {
                html += `
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Ø§Ù„Ø§Ø³Ù…</th>
                                <th>Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„Ù…Ø¯Ù†ÙŠ</th>
                                <th>Ø§Ù„Ù†Ù‚Ø§Ø·</th>
                                <th>Ø§Ù„Ø¬ÙˆÙ„Ø§Øª</th>
                                <th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                            </tr>
                        </thead>
                        <tbody>
                `;
                users.sort((a, b) => b.totalScore - a.totalScore).forEach((user, i) => {
                    html += `
                        <tr>
                            <td>${i + 1}</td>
                            <td>${user.name}</td>
                            <td>${user.id}</td>
                            <td>${user.totalScore}</td>
                            <td>${user.gamesPlayed}</td>
                            <td>
                                <button class="admin-btn reset" onclick="resetUserStats('${user.id}')">Ø¥Ø¹Ø§Ø¯Ø©</button>
                                <button class="admin-btn delete" onclick="deleteUser('${user.id}')">Ø­Ø°Ù</button>
                            </td>
                        </tr>
                    `;
                });
                html += '</tbody></table>';
            } else {
                html += '<p style="text-align: center; color: var(--text-muted);">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù…Ø³Ø¬Ù„ÙŠÙ†</p>';
            }

            document.getElementById('admin-content').innerHTML = html;
            document.getElementById('admin-modal').classList.add('active');
        }

        function resetUserStats(id) {
            if (usersDB[id]) {
                usersDB[id].totalScore = 0;
                usersDB[id].gamesPlayed = 0;
                usersDB[id].maxStreak = 0;
                usersDB[id].correctAnswers = 0;
                usersDB[id].wrongAnswers = 0;
                saveUserToFirebase(usersDB[id]);
                if (currentUser && currentUser.id === id) {
                    loadUserStats();
                }
                showAdminPanel();
                showCustomAlert('ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');
            }
        }

        function deleteUser(id) {
            const modal = document.createElement('div');
            modal.className = 'modal-overlay active';
            modal.innerHTML = `
                <div class="modal">
                    <h2><i class="fas fa-trash" style="color: var(--danger);"></i> Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</h2>
                    <p>Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ØŸ</p>
                    <div class="btn-container">
                        <button class="btn btn-secondary" onclick="this.closest('.modal-overlay').remove()">Ø¥Ù„ØºØ§Ø¡</button>
                        <button class="btn" style="background: var(--danger);" onclick="confirmDeleteUser('${id}'); this.closest('.modal-overlay').remove();">Ø­Ø°Ù</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function confirmDeleteUser(id) {
            deleteUserFromFirebase(id);
            delete usersDB[id];
            if (currentUser && currentUser.id === id) {
                logout();
            }
            showAdminPanel();
            showCustomAlert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­');
        }

        function exportData() {
            const users = Object.values(usersDB);
            let csv = 'Ø§Ù„Ø§Ø³Ù…,Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„Ù…Ø¯Ù†ÙŠ,Ø§Ù„Ù†Ù‚Ø§Ø·,Ø§Ù„Ø¬ÙˆÙ„Ø§Øª,Ø£Ø¹Ù„Ù‰ Ø³Ù„Ø³Ù„Ø©\n';
            users.forEach(user => {
                csv += `${user.name},${user.id},${user.totalScore},${user.gamesPlayed},${user.maxStreak}\n`;
            });

            const blob = new Blob(['\ufeff' + csv], { type: 'text/csv;charset=utf-8;' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'quiz_data.csv';
            a.click();
            URL.revokeObjectURL(url);
        }

        // Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ÙˆØ§Ù„Ø¯Ø®ÙˆÙ„
        function showLoginModal() {
            closeModal('register-modal');
            document.getElementById('login-modal').classList.add('active');
        }

        function showRegisterModal() {
            closeModal('login-modal');
            document.getElementById('register-modal').classList.add('active');
        }

        function login() {
            const id = document.getElementById('login-id').value.trim();
            if (!id) {
                showCustomAlert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„Ù…Ø¯Ù†ÙŠ');
                return;
            }
            if (usersDB[id]) {
                currentUser = usersDB[id];
                setCookie('currentUserId', id, 30);
                loadUserStats();
                updateUserDisplay();
                closeModal('login-modal');
                document.getElementById('login-id').value = '';
                showCustomAlert(`Ù…Ø±Ø­Ø¨Ø§Ù‹ ${currentUser.name}!`);
                if (pendingAction) {
                    window[pendingAction]();
                    pendingAction = null;
                }
            } else {
                showCustomAlert('Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„Ù…Ø¯Ù†ÙŠ ØºÙŠØ± Ù…Ø³Ø¬Ù„. Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø£ÙˆÙ„Ø§Ù‹.');
            }
        }

        function register() {
            const name = document.getElementById('register-name').value.trim();
            const id = document.getElementById('register-id').value.trim();

            if (!name || !id) {
                showCustomAlert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
                return;
            }
            if (id.length !== 10 || !/^\d+$/.test(id)) {
                showCustomAlert('Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„Ù…Ø¯Ù†ÙŠ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 10 Ø£Ø±Ù‚Ø§Ù…');
                return;
            }
            if (usersDB[id]) {
                const modal = document.createElement('div');
                modal.className = 'modal-overlay active';
                modal.innerHTML = `
                    <div class="modal">
                        <h2><i class="fas fa-user-check" style="color: var(--success);"></i></h2>
                        <p>Ø£Ù†Øª <strong style="color: var(--secondary);">${usersDB[id].name}</strong> Ù…Ø³Ø¬Ù„ Ù…Ø³Ø¨Ù‚Ø§Ù‹!</p>
                        <button class="btn" onclick="this.closest('.modal-overlay').remove(); loginExisting('${id}')">ØªÙØ¶Ù„ Ø§Ø¯Ø®Ù„ Ø¨Ø§Ù„Ù†Ù‚Ø± Ù‡Ù†Ø§</button>
                    </div>
                `;
                document.body.appendChild(modal);
                return;
            }

            usersDB[id] = {
                id: id,
                name: name,
                totalScore: 0,
                gamesPlayed: 0,
                maxStreak: 0,
                correctAnswers: 0,
                wrongAnswers: 0,
                registeredAt: new Date().toISOString()
            };
            saveUserToFirebase(usersDB[id]);

            currentUser = usersDB[id];
            setCookie('currentUserId', id, 30);
            loadUserStats();
            updateUserDisplay();
            closeModal('register-modal');
            document.getElementById('register-name').value = '';
            document.getElementById('register-id').value = '';
            showCustomAlert(`ØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­! Ù…Ø±Ø­Ø¨Ø§Ù‹ ${name}`);
            if (pendingAction) {
                window[pendingAction]();
                pendingAction = null;
            }
        }

        function loginExisting(id) {
            currentUser = usersDB[id];
            setCookie('currentUserId', id, 30);
            loadUserStats();
            updateUserDisplay();
            closeModal('register-modal');
        }

        function logout() {
            currentUser = null;
            deleteCookie('currentUserId');
            gameState.totalScore = 0;
            gameState.gamesPlayed = 0;
            gameState.maxStreak = 0;
            updateStatsDisplay();
            updateUserDisplay();
        }

        function loadUserStats() {
            if (currentUser) {
                gameState.totalScore = currentUser.totalScore;
                gameState.gamesPlayed = currentUser.gamesPlayed;
                gameState.maxStreak = currentUser.maxStreak;
                updateStatsDisplay();
            }
        }

        function saveUserStats() {
            if (currentUser) {
                currentUser.totalScore = gameState.totalScore;
                currentUser.gamesPlayed = gameState.gamesPlayed;
                currentUser.maxStreak = gameState.maxStreak;
                currentUser.correctAnswers = currentUser.correctAnswers || 0;
                currentUser.wrongAnswers = currentUser.wrongAnswers || 0;
                usersDB[currentUser.id] = currentUser;
                saveUserToFirebase(currentUser);
            }
        }

        function saveGameAnswers(correct, wrong) {
            if (currentUser) {
                currentUser.correctAnswers = (currentUser.correctAnswers || 0) + correct;
                currentUser.wrongAnswers = (currentUser.wrongAnswers || 0) + wrong;
                usersDB[currentUser.id] = currentUser;
                saveUserToFirebase(currentUser);
            }
        }

        function updateUserDisplay() {
            const userInfo = document.getElementById('user-info');
            if (currentUser) {
                userInfo.innerHTML = `
                    <div class="user-avatar"><i class="fas fa-user-check"></i></div>
                    <div>
                        <div class="user-name">${currentUser.name}</div>
                        <div class="user-id">Ø§Ù„Ø³Ø¬Ù„: ${currentUser.id}</div>
                    </div>
                `;
                document.getElementById('user-bar').innerHTML = `
                    <div class="user-info" id="user-info">
                        <div class="user-avatar"><i class="fas fa-user-check"></i></div>
                        <div>
                            <div class="user-name">${currentUser.name}</div>
                            <div class="user-id">Ø§Ù„Ø³Ø¬Ù„: ${currentUser.id}</div>
                        </div>
                    </div>
                    <button class="logout-btn" onclick="logout()"><i class="fas fa-sign-out-alt"></i> ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>
                `;
            } else {
                document.getElementById('user-bar').innerHTML = `
                    <div class="user-info" id="user-info">
                        <div class="user-avatar"><i class="fas fa-user"></i></div>
                        <div>
                            <div class="not-registered" onclick="showLoginModal()">
                                Ø£Ù†Øª ØºÙŠØ± Ù…Ø³Ø¬Ù„ - Ø§Ù†Ù‚Ø± Ù‡Ù†Ø§ Ù„Ù„ØªØ³Ø¬ÙŠÙ„
                            </div>
                        </div>
                    </div>
                `;
            }
        }

        function requireLogin(action) {
            if (!currentUser) {
                pendingAction = action;
                showCustomAlert('Ø§Ø³ØªÙ…ØªØ¹ Ø¨Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© Ø¨Ø¹Ø¯ Ø§Ù„ØªØ³Ø¬ÙŠÙ„');
                showLoginModal();
            } else {
                window[action]();
            }
        }

        function updateStatsDisplay() {
            document.getElementById('total-score').textContent = gameState.totalScore;
            document.getElementById('streak').textContent = gameState.maxStreak;
            document.getElementById('games-played').textContent = gameState.gamesPlayed;
        }

        function renderUnitSelection() {
            const container = document.getElementById('unit-selection');
            container.innerHTML = units.map(unit => `
                <div class="round-option" data-unit="${unit.id}" onclick="selectUnit(${unit.id})">
                    <h4>${unit.icon}</h4>
                    <p>${unit.name}</p>
                </div>
            `).join('');
        }

        function selectUnit(unitId) {
            gameState.selectedUnit = unitId;
            document.querySelectorAll('.round-option').forEach(el => el.classList.remove('selected'));
            document.querySelector(`[data-unit="${unitId}"]`).classList.add('selected');
        }

        function showRoundModal() {
            document.getElementById('round-modal').classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        function getRandomQuestions(count, unitFilter = null) {
            let available = questionsBank.filter(q => {
                if (unitFilter && q.unit !== unitFilter) return false;
                return !gameState.usedQuestions.has(JSON.stringify(q));
            });

            if (available.length < count) {
                gameState.usedQuestions.clear();
                available = unitFilter ?
                    questionsBank.filter(q => q.unit === unitFilter) :
                    [...questionsBank];
            }

            const shuffled = available.sort(() => Math.random() - 0.5);
            const selected = shuffled.slice(0, Math.min(count, shuffled.length));
            selected.forEach(q => gameState.usedQuestions.add(JSON.stringify(q)));
            return selected;
        }

        function startQuickGame() {
            gameState.gameMode = 'quick';
            gameState.currentQuestions = getRandomQuestions(10);
            startGame("Ø§Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„Ø³Ø±ÙŠØ¹Ø©");
        }

        function startUnitGame() {
            if (!gameState.selectedUnit) {
                showCustomAlert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± ÙˆØ­Ø¯Ø© Ù„Ù„ØªØ¯Ø±Ø¨ Ø¹Ù„ÙŠÙ‡Ø§');
                return;
            }
            closeModal('round-modal');
            gameState.gameMode = 'unit';
            gameState.currentQuestions = getRandomQuestions(10, gameState.selectedUnit);
            const unitName = units.find(u => u.id === gameState.selectedUnit).name;
            startGame(unitName);
        }

        function startMarathon() {
            gameState.gameMode = 'marathon';
            gameState.currentQuestions = getRandomQuestions(25);
            startGame("Ù…Ø§Ø±Ø§Ø«ÙˆÙ† Ø§Ù„ØªÙØ³ÙŠØ±");
        }

        function startGame(roundName) {
            gameState.currentIndex = 0;
            gameState.score = 0;
            gameState.correctAnswers = 0;
            gameState.wrongAnswers = 0;
            gameState.streak = 0;

            document.getElementById('round-name').textContent = roundName;
            showScreen('game-screen');
            displayQuestion();
        }

        function displayQuestion() {
            const question = gameState.currentQuestions[gameState.currentIndex];
            const total = gameState.currentQuestions.length;

            document.getElementById('q-number').textContent = gameState.currentIndex + 1;
            document.getElementById('question-counter').textContent = `Ø§Ù„Ø³Ø¤Ø§Ù„ ${gameState.currentIndex + 1} Ù…Ù† ${total}`;
            document.getElementById('progress-fill').style.width = `${((gameState.currentIndex) / total) * 100}%`;
            document.getElementById('question-text').textContent = question.question;
            document.getElementById('q-type').textContent = question.type === 'mcq' ? 'Ø§Ø®ØªÙŠØ§Ø± Ù…Ù† Ù…ØªØ¹Ø¯Ø¯' : 'ØµØ­ Ø£Ù… Ø®Ø·Ø£';

            const optionsContainer = document.getElementById('options-container');

            if (question.type === 'mcq') {
                optionsContainer.className = 'options-container';
                optionsContainer.innerHTML = question.options.map((opt, i) => `
                    <div class="option" onclick="selectOption(${i})">
                        <span class="option-letter">${['Ø£', 'Ø¨', 'Ø¬'][i]}</span>
                        <span>${opt}</span>
                    </div>
                `).join('');
            } else {
                optionsContainer.className = 'options-container tf-options';
                optionsContainer.innerHTML = `
                    <div class="option tf-option" onclick="selectTF(true)">
                        <i class="fas fa-check-circle" style="color: var(--success);"></i>
                        ØµØ­
                    </div>
                    <div class="option tf-option" onclick="selectTF(false)">
                        <i class="fas fa-times-circle" style="color: var(--danger);"></i>
                        Ø®Ø·Ø£
                    </div>
                `;
            }

            startTimer();
        }

        function startTimer() {
            gameState.timeLeft = 30;
            updateTimerDisplay();

            if (gameState.timer) clearInterval(gameState.timer);

            gameState.timer = setInterval(() => {
                gameState.timeLeft--;
                updateTimerDisplay();

                if (gameState.timeLeft <= 0) {
                    clearInterval(gameState.timer);
                    handleTimeout();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const timerEl = document.getElementById('timer');
            document.getElementById('time-left').textContent = gameState.timeLeft;
            timerEl.classList.toggle('warning', gameState.timeLeft <= 10);
        }

        function selectOption(index) {
            clearInterval(gameState.timer);
            const question = gameState.currentQuestions[gameState.currentIndex];
            const isCorrect = index === question.correct;
            processAnswer(isCorrect, index);
        }

        function selectTF(answer) {
            clearInterval(gameState.timer);
            const question = gameState.currentQuestions[gameState.currentIndex];
            const isCorrect = answer === question.correct;
            processAnswer(isCorrect, answer);
        }

        function processAnswer(isCorrect, selected) {
            const options = document.querySelectorAll('.option');
            options.forEach(opt => opt.classList.add('disabled'));

            const question = gameState.currentQuestions[gameState.currentIndex];

            if (question.type === 'mcq') {
                options[question.correct].classList.add('correct');
                if (!isCorrect && typeof selected === 'number') {
                    options[selected].classList.add('wrong');
                }
            } else {
                const correctIndex = question.correct ? 0 : 1;
                const selectedIndex = selected ? 0 : 1;
                options[correctIndex].classList.add('correct');
                if (!isCorrect) {
                    options[selectedIndex].classList.add('wrong');
                }
            }

            if (isCorrect) {
                gameState.correctAnswers++;
                gameState.streak++;
                const basePoints = 10;
                const timeBonus = Math.floor(gameState.timeLeft / 3);
                const streakBonus = Math.min(gameState.streak - 1, 5) * 2;
                gameState.score += basePoints + timeBonus + streakBonus;
                showFeedback('âœ…');
                playSound('correct');
            } else {
                gameState.wrongAnswers++;
                gameState.streak = 0;
                showFeedback('âŒ');
                playSound('wrong');
            }

            gameState.maxStreak = Math.max(gameState.maxStreak, gameState.streak);
            document.getElementById('streak').textContent = gameState.streak;

            const countdownBar = document.getElementById('countdown-bar');
            countdownBar.style.display = 'block';
            countdownBar.style.animation = 'none';
            countdownBar.offsetHeight;
            countdownBar.style.animation = 'countdownShrink 3s linear forwards';

            gameState.autoNextTimer = setTimeout(() => {
                countdownBar.style.display = 'none';
                nextQuestion();
            }, 3000);
        }

        function handleTimeout() {
            gameState.wrongAnswers++;
            gameState.streak = 0;
            const options = document.querySelectorAll('.option');
            options.forEach(opt => opt.classList.add('disabled'));

            const question = gameState.currentQuestions[gameState.currentIndex];
            if (question.type === 'mcq') {
                options[question.correct].classList.add('correct');
            } else {
                options[question.correct ? 0 : 1].classList.add('correct');
            }

            showFeedback('â°');
            playSound('wrong');

            const countdownBar = document.getElementById('countdown-bar');
            countdownBar.style.display = 'block';
            countdownBar.style.animation = 'none';
            countdownBar.offsetHeight;
            countdownBar.style.animation = 'countdownShrink 3s linear forwards';

            gameState.autoNextTimer = setTimeout(() => {
                countdownBar.style.display = 'none';
                nextQuestion();
            }, 3000);
        }

        function nextQuestion() {
            if (gameState.autoNextTimer) {
                clearTimeout(gameState.autoNextTimer);
                gameState.autoNextTimer = null;
            }
            document.getElementById('countdown-bar').style.display = 'none';

            gameState.currentIndex++;
            if (gameState.currentIndex >= gameState.currentQuestions.length) {
                endGame();
            } else {
                displayQuestion();
            }
        }

        function endGame() {
            clearInterval(gameState.timer);
            gameState.gamesPlayed++;
            gameState.totalScore += gameState.score;

            // Save correct and wrong answers for this game session
            saveGameAnswers(gameState.correctAnswers, gameState.wrongAnswers);
            saveUserStats();

            const percentage = Math.round((gameState.correctAnswers / gameState.currentQuestions.length) * 100);

            let icon, title;
            if (percentage >= 90) {
                icon = 'ğŸ†'; title = 'Ù…Ù…ØªØ§Ø²! Ù…Ø§ Ø´Ø§Ø¡ Ø§Ù„Ù„Ù‡!';
                createConfetti();
            } else if (percentage >= 70) {
                icon = 'ğŸŒŸ'; title = 'Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹!';
            } else if (percentage >= 50) {
                icon = 'ğŸ‘'; title = 'Ø¬ÙŠØ¯ØŒ Ø§Ø³ØªÙ…Ø±!';
            } else {
                icon = 'ğŸ“š'; title = 'Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰';
            }

            document.getElementById('results-icon').textContent = icon;
            document.getElementById('results-title').textContent = title;
            document.getElementById('final-score').textContent = percentage + '%';
            document.getElementById('correct-count').textContent = gameState.correctAnswers;
            document.getElementById('wrong-count').textContent = gameState.wrongAnswers;
            document.getElementById('points-earned').textContent = gameState.score;

            updateStatsDisplay();
            showScreen('results-screen');
        }

        function showLeaderboard() {
            const list = document.getElementById('leaderboard-list');
            const users = Object.values(usersDB).sort((a, b) => b.totalScore - a.totalScore);

            if (users.length === 0) {
                list.innerHTML = '<p style="text-align: center; color: var(--text-muted); padding: 30px;">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…ØªØ³Ø§Ø¨Ù‚ÙŠÙ† Ø¨Ø¹Ø¯!</p>';
            } else {
                list.innerHTML = users.map((user, i) => {
                    let rankClass = i === 0 ? 'gold' : i === 1 ? 'silver' : i === 2 ? 'bronze' : '';
                    const isCurrentUser = currentUser && currentUser.id === user.id;
                    return `
                        <div class="leaderboard-item ${rankClass}" style="${isCurrentUser ? 'border: 2px solid var(--secondary);' : ''}">
                            <div class="rank ${rankClass || 'normal'}">${i + 1}</div>
                            <div class="leaderboard-name" style="${isCurrentUser ? 'color: var(--secondary); font-weight: 700;' : ''}">${user.name} ${isCurrentUser ? '(Ø£Ù†Øª)' : ''}</div>
                            <span class="leaderboard-games">${user.gamesPlayed} Ø¬ÙˆÙ„Ø©</span>
                            <div class="leaderboard-score">${user.totalScore} Ù†Ù‚Ø·Ø©</div>
                        </div>
                    `;
                }).join('');
            }
            showScreen('leaderboard-screen');
        }

        function playAgain() {
            switch (gameState.gameMode) {
                case 'quick': startQuickGame(); break;
                case 'unit':
                    gameState.currentQuestions = getRandomQuestions(10, gameState.selectedUnit);
                    const unitName = units.find(u => u.id === gameState.selectedUnit).name;
                    startGame(unitName);
                    break;
                case 'marathon': startMarathon(); break;
            }
        }

        function goHome() {
            clearInterval(gameState.timer);
            if (gameState.autoNextTimer) {
                clearTimeout(gameState.autoNextTimer);
                gameState.autoNextTimer = null;
            }
            showScreen('home-screen');
        }

        function confirmExit() {
            const modal = document.createElement('div');
            modal.className = 'modal-overlay active';
            modal.id = 'exit-confirm-modal';
            modal.innerHTML = `
                <div class="modal">
                    <h2><i class="fas fa-exclamation-triangle" style="color: var(--accent);"></i> Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¬ÙˆÙ„Ø©</h2>
                    <p>Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©ØŸ<br>Ø³ÙŠØªÙ… ÙÙ‚Ø¯Ø§Ù† ØªÙ‚Ø¯Ù…Ùƒ ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ø¬ÙˆÙ„Ø©.</p>
                    <div class="btn-container">
                        <button class="btn btn-secondary" onclick="document.getElementById('exit-confirm-modal').remove()">
                            <i class="fas fa-arrow-right"></i> Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ù„Ø¹Ø¨
                        </button>
                        <button class="btn" style="background: var(--accent);" onclick="document.getElementById('exit-confirm-modal').remove(); exitGame();">
                            <i class="fas fa-sign-out-alt"></i> Ø¥Ù†Ù‡Ø§Ø¡
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function exitGame() {
            clearInterval(gameState.timer);
            if (gameState.autoNextTimer) {
                clearTimeout(gameState.autoNextTimer);
                gameState.autoNextTimer = null;
            }
            goHome();
        }

        function showScreen(screenId) {
            document.querySelectorAll('.game-screen').forEach(s => {
                s.classList.remove('active');
                s.style.display = 'none';
            });
            const screen = document.getElementById(screenId);
            screen.style.display = 'block';
            setTimeout(() => screen.classList.add('active'), 10);
        }

        function showFeedback(emoji) {
            const feedback = document.createElement('div');
            feedback.className = 'feedback';
            feedback.textContent = emoji;
            document.body.appendChild(feedback);
            setTimeout(() => feedback.remove(), 800);
        }

        function createConfetti() {
            const colors = ['#d4af37', '#1a5f4a', '#28a745', '#ffc107', '#17a2b8'];
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + 'vw';
                    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                    confetti.style.width = (Math.random() * 10 + 5) + 'px';
                    confetti.style.height = confetti.style.width;
                    document.body.appendChild(confetti);
                    setTimeout(() => confetti.remove(), 3000);
                }, i * 30);
            }
        }

        function showCustomAlert(message) {
            const modal = document.createElement('div');
            modal.className = 'modal-overlay active';
            modal.innerHTML = `
                <div class="modal">
                    <h2><i class="fas fa-info-circle"></i> ØªÙ†Ø¨ÙŠÙ‡</h2>
                    <p>${message}</p>
                    <button class="btn" onclick="this.closest('.modal-overlay').remove()">Ø­Ø³Ù†Ø§Ù‹</button>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // ========== General Statistics Functions ==========
        let selectedStudents = new Set();
        let allStudentsSorted = [];

        function showGeneralStats() {
            populateStudentsList();
            updateLastJoined();
            updateStatsTable();
            showScreen('stats-screen');
        }

        function updateLastJoined() {
            const users = Object.values(usersDB);
            const container = document.getElementById('last-joined-list');

            if (users.length === 0) {
                container.innerHTML = '<div class="last-joined-empty">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø³Ø¬Ù„ÙŠÙ† Ø¨Ø¹Ø¯</div>';
                return;
            }

            // Sort by registration date descending
            const sortedByDate = users.filter(u => u.registeredAt).sort((a, b) => {
                return new Date(b.registeredAt) - new Date(a.registeredAt);
            });

            if (sortedByDate.length === 0) {
                container.innerHTML = '<div class="last-joined-empty">Ù„Ø§ ØªØªÙˆÙØ± Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ³Ø¬ÙŠÙ„</div>';
                return;
            }

            // Get last 5 users
            const lastFive = sortedByDate.slice(0, 5);

            container.innerHTML = lastFive.map(user => {
                const date = new Date(user.registeredAt);
                const formattedDate = formatArabicDateTime(date);
                return `
                    <div class="last-joined-item">
                        <span class="name">${user.name}</span>
                        <span class="datetime">
                            <i class="fas fa-calendar-alt"></i>
                            ${formattedDate}
                        </span>
                    </div>
                `;
            }).join('');
        }

        function formatArabicDateTime(date) {
            const day = date.getDate();
            const month = date.getMonth() + 1;
            const year = date.getFullYear();
            const hours = date.getHours();
            const minutes = date.getMinutes().toString().padStart(2, '0');
            const period = hours >= 12 ? 'Ù…' : 'Øµ';
            const hour12 = hours % 12 || 12;

            return `${day}/${month}/${year} - ${hour12}:${minutes} ${period}`;
        }

        function populateStudentsList() {
            const users = Object.values(usersDB);
            // Sort alphabetically by name
            allStudentsSorted = users.sort((a, b) => a.name.localeCompare(b.name, 'ar'));

            // Initialize: select all students by default
            if (selectedStudents.size === 0 && allStudentsSorted.length > 0) {
                allStudentsSorted.forEach(u => selectedStudents.add(u.id));
            }

            renderStudentsList(allStudentsSorted);
            updateSelectAllCheckbox();
            updateSelectedCount();
        }

        function renderStudentsList(students) {
            const container = document.getElementById('students-list');
            if (students.length === 0) {
                container.innerHTML = '<div class="no-data-message" style="padding: 20px;">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø·Ù„Ø§Ø¨</div>';
                return;
            }
            container.innerHTML = students.map(student => `
                <div class="student-item">
                    <label>
                        <input type="checkbox" value="${student.id}"
                            ${selectedStudents.has(student.id) ? 'checked' : ''}
                            onchange="toggleStudent('${student.id}')">
                        <span>${student.name}</span>
                    </label>
                </div>
            `).join('');
        }

        function toggleMultiSelect() {
            const dropdown = document.getElementById('multi-select-dropdown');
            const header = document.querySelector('.multi-select-header');
            dropdown.classList.toggle('show');
            header.classList.toggle('open');
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', function(e) {
            const container = document.querySelector('.multi-select-container');
            if (container && !container.contains(e.target)) {
                document.getElementById('multi-select-dropdown').classList.remove('show');
                document.querySelector('.multi-select-header').classList.remove('open');
            }
        });

        function filterStudents() {
            const searchTerm = document.getElementById('student-search').value.toLowerCase().trim();
            const filtered = allStudentsSorted.filter(s => s.name.toLowerCase().includes(searchTerm));
            renderStudentsList(filtered);
        }

        function toggleStudent(studentId) {
            if (selectedStudents.has(studentId)) {
                selectedStudents.delete(studentId);
            } else {
                selectedStudents.add(studentId);
            }
            updateSelectAllCheckbox();
            updateSelectedCount();
            updateStatsTable();
        }

        function toggleSelectAll() {
            const selectAllCheckbox = document.getElementById('select-all-checkbox');
            if (selectAllCheckbox.checked) {
                allStudentsSorted.forEach(s => selectedStudents.add(s.id));
            } else {
                selectedStudents.clear();
            }
            renderStudentsList(allStudentsSorted);
            updateSelectedCount();
            updateStatsTable();
        }

        function updateSelectAllCheckbox() {
            const selectAllCheckbox = document.getElementById('select-all-checkbox');
            if (allStudentsSorted.length === 0) {
                selectAllCheckbox.checked = false;
                selectAllCheckbox.indeterminate = false;
            } else if (selectedStudents.size === allStudentsSorted.length) {
                selectAllCheckbox.checked = true;
                selectAllCheckbox.indeterminate = false;
            } else if (selectedStudents.size === 0) {
                selectAllCheckbox.checked = false;
                selectAllCheckbox.indeterminate = false;
            } else {
                selectAllCheckbox.checked = false;
                selectAllCheckbox.indeterminate = true;
            }
        }

        function updateSelectedCount() {
            const countEl = document.getElementById('selected-count');
            if (selectedStudents.size === 0) {
                countEl.textContent = 'Ø§Ø®ØªØ± Ø§Ù„Ø·Ù„Ø§Ø¨ Ù„Ù„Ø¹Ø±Ø¶';
            } else if (selectedStudents.size === allStudentsSorted.length) {
                countEl.textContent = 'Ø§Ø®ØªØ± Ø§Ù„Ø·Ù„Ø§Ø¨ Ù„Ù„Ø¹Ø±Ø¶ (Ø§Ù„ÙƒÙ„)';
            } else {
                countEl.textContent = `ØªÙ… ØªØ­Ø¯ÙŠØ¯ ${selectedStudents.size} Ø·Ø§Ù„Ø¨`;
            }
        }

        function updateStatsTable() {
            const tbody = document.getElementById('stats-table-body');
            const users = Object.values(usersDB);

            if (users.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="6">
                            <div class="no-data-message">
                                <i class="fas fa-users-slash"></i>
                                Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø·Ù„Ø§Ø¨ Ù…Ø³Ø¬Ù„ÙŠÙ† Ø¨Ø¹Ø¯
                            </div>
                        </td>
                    </tr>
                `;
                return;
            }

            // Filter and sort selected students alphabetically
            const selectedUsers = users
                .filter(u => selectedStudents.has(u.id))
                .sort((a, b) => a.name.localeCompare(b.name, 'ar'));

            if (selectedUsers.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="6">
                            <div class="no-data-message">
                                <i class="fas fa-filter"></i>
                                Ø§Ø®ØªØ± Ø·Ù„Ø§Ø¨Ø§Ù‹ Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù„Ø¹Ø±Ø¶ Ø¥Ø­ØµØ§Ø¦ÙŠØ§ØªÙ‡Ù…
                            </div>
                        </td>
                    </tr>
                `;
                return;
            }

            tbody.innerHTML = selectedUsers.map((user, index) => {
                // Check if user has answer tracking data
                const hasAnswerData = user.correctAnswers !== undefined || user.wrongAnswers !== undefined;
                const correctAnswers = user.correctAnswers || 0;
                const wrongAnswers = user.wrongAnswers || 0;
                const totalQuestions = correctAnswers + wrongAnswers;
                // Points: +1 for correct, -1 for wrong
                const netPoints = correctAnswers - wrongAnswers;

                // If user played games but has no answer data (old user before tracking)
                if (user.gamesPlayed > 0 && !hasAnswerData) {
                    return `
                        <tr>
                            <td>${index + 1}</td>
                            <td class="student-name-cell">${user.name}</td>
                            <td colspan="4" style="color: var(--text-muted); text-align: center; font-size: 0.85rem;">
                                <i class="fas fa-clock"></i> ØªØ¨Ø¯Ø£ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù…Ù† Ø§Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©
                            </td>
                        </tr>
                    `;
                }

                let pointsClass = 'points-zero';
                if (netPoints > 0) pointsClass = 'points-positive';
                else if (netPoints < 0) pointsClass = 'points-negative';

                return `
                    <tr>
                        <td>${index + 1}</td>
                        <td class="student-name-cell">${user.name}</td>
                        <td>${totalQuestions}</td>
                        <td style="color: var(--success);">${correctAnswers}</td>
                        <td style="color: var(--danger);">${wrongAnswers}</td>
                        <td class="${pointsClass}">${netPoints > 0 ? '+' : ''}${netPoints}</td>
                    </tr>
                `;
            }).join('');
        }

        // ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        init();
    </script>
</body>
</html>